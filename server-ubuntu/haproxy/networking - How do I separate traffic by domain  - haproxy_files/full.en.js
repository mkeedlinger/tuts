'use strict';(function(i){function d(){}function h(c,e){if(b)return e.indexOf(c);for(var f=e.length;f--;)if(e[f]===c)return f;return-1}var c=d.prototype,k=[],b=k.indexOf?!0:!1;c.getListeners=function(b){var e=this._events||(this._events={});return e[b]||(e[b]=[])};c.addListener=function(b,e){var f=this.getListeners(b);-1===h(e,f)&&f.push(e);return this};c.removeListener=function(b,e){var f=this.getListeners(b),c=h(e,f);-1!==c&&(f.splice(c,1),0===f.length&&(this._events[b]=null));return this};c.addListeners=
function(b,e){return this.manipulateListeners(!1,b,e)};c.removeListeners=function(b,e){return this.manipulateListeners(!0,b,e)};c.manipulateListeners=function(b,e,f){var c,j,a=b?this.removeListener:this.addListener,b=b?this.removeListeners:this.addListeners;if("object"===typeof e)for(c in e){if(e.hasOwnProperty(c)&&(j=e[c]))"function"===typeof j?a.call(this,c,j):b.call(this,c,j)}else for(c=f.length;c--;)a.call(this,e,f[c]);return this};c.removeEvent=function(b){b?this._events[b]=null:this._events=
null;return this};c.emitEvent=function(b,c){for(var f=this.getListeners(b),h=f.length;h--;)!0===f[h].apply(null,c||k)&&this.removeListener(b,f[h]);return this};"function"===typeof define&&define.amd?define(function(){return d}):i.EventEmitter=d})(this);
StackExchange.realtime=function(){function i(){if(!(null==o||1!=o.readyState))for(var a=0,b=y.length;a<b;a++)d("sending: "+y[a]),o.send(y[a])}function d(a){StackExchange.options.user.isEmployee&&console.log(a)}function h(){w.addListener("hb",function(a){o.send(a)})}function c(a){y.push(a);i()}function k(a,b){1!=$("#vote-accepted-"+a.answerid).length&&($(".vote-accepted-on").remove(),b||$('.vote input[value="'+a.answerid+'"]').parent().append($("<span>",{"class":"vote-accepted-on",title:"The question owner accepted this as the best answer",
text:"accepted"})))}function b(a){if(0==$("#comment-"+a.commentid).length){var b=$("#comments-link-"+a.id),g=$("tbody","#comments-"+a.id).data("remaining-comments-count")||0;g++;b.data("comments-count",g);b.attr("title","expand to show all comments on this post, or add one of your own");a=function(a){return 1==a.commentsCount?"add / show <b>"+a.commentsCount+"</b> more comment":"add / show <b>"+a.commentsCount+"</b> more comments"}({commentsCount:g});g=function(a){return 1==a.commentsCount?"show <b>"+
a.commentsCount+"</b> more comment":"show <b>"+a.commentsCount+"</b> more comments"}({commentsCount:g});b.removeClass("disabled-link");b.text().contains("add")?b.html(a):b.html(g);b.show().fadeTo("fast",0.7).fadeTo("fast",1)}}function l(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(a){if(a&&a.count){var a=a.count,b=$(".suggested-edits-count");b.text()!=a&&(0==$(":animated").length&&b.fadeTo("fast",0.5).fadeTo("fast",
1),b.text(a))}}})}function e(){$("#new-answer-activity").remove();$("#answers-header").prepend(z)}function f(a){var b=$(".question[data-questionid="+a.id+"], .answer[data-answerid="+a.id+"]"),g=$('<div class="new-post-activity" data-postid="'+a.id+'">an edit has been made to this post; click to load</div>');0<b.find(".new-post-activity[data-postid="+a.id+"]").length||b.prepend(g.click(function(){$(".new-post-activity[data-postid="+a.id+"]").remove();0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".formatUnicorn({postIdsSemiColonDelimited:a.id}),
s(b.find(".postcell, .answercell"),a));$(document).trigger("refreshEdit",a.id)}))}function m(b,g,f){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(b.body)||(b.fetch&&$.ajax({url:"/posts/"+b.id+"/"+f}).done(function(a){b.body=a;p[b.id]={id:b.id,body:b.body,index:(new Date).getTime(),siteid:b.siteid}}),p[b.id]={id:b.id,body:b.body,index:(new Date).getTime(),siteid:b.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(q),0<$(".tag-sponsorship").length&&
$("#question-mini-list, #questions").css("margin-top","0px"),g&&a())}function j(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function a(){var a=[],b;for(b in p)p.hasOwnProperty(b)&&a.push(p[b]);a=a.sort(j);for(b=0;b<a.length;b++){var f=a[b];$("#question-summary-"+f.id).remove();$(f.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}g(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,r);styleCode();n();$(".new-post-activity").remove();p=
{}}function g(a){var b=document.title.replace(/^\(\d*\*?\) /,"");0<a&&(b="("+a+") "+b);window.setTimeout(function(){$(document).attr("title",b)},200)}function n(){for(var a=$("span.relativetime, span.relativetime-clean"),b=0;b<a.length;b++)if(a[b].title){var g;g=a[b].title;if(null==g||20!=g.length)g=void 0;else{g=g.substr(0,10)+"T"+g.substr(11,10);g=new Date(g);g=((new Date).getTime()-g.getTime())/1E3+StackExchange.options.serverTimeOffsetSec;var f=Math.floor(g/86400),c=void 0;if(isNaN(f)||0>f||31<=
f)c=void 0;else if(c=void 0,c=0==f){f=void 0;if(!(f=2>g&&"just now"))if(f=void 0,!(f=60>g&&(B?Math.floor(g)+"s ago":Math.floor(g)+" secs ago")))if(f=void 0,!(f=120>g&&(B?"1m ago":"1 min ago")))if(f=void 0,!(f=3600>g&&(B?Math.floor(g/60)+"m ago":Math.floor(g/60)+" mins ago")))if(f=void 0,!(f=7200>g&&(B?"1h ago":"1 hour ago")))if(f=void 0,f=86400>g)f=void 0,B?f=Math.floor(g/3600)+"h ago":(g={hours:Math.floor(g/3600)},f=1==g.hours?g.hours+" hour ago":g.hours+" hours ago");c=f}g=c}g&&(a[b].innerHTML=
g)}}var o,p={},v=[],u=0,y=[],x=10,A=!1,B=!1,r,w=new EventEmitter,z=function(){var a=Object.keys(v).length;0==a&&$("#new-answer-activity").remove();return $('<div id="new-answer-activity">'+function(a){return 1==a.count?a.count+" new answer to this question":a.count+" new answers to this question"}({count:a})+"</div>").click(function(){StackExchange.realtime.expandAnswers()})},s=function(a,b){return function(g){var f=$(g).filter(".question, .answer"),c=f.find(".postcell, .answercell"),e=a.closest(".question"),
j=0<e.length,k=$("h1 a.question-hyperlink"),n=f.data("title"),h=j&&$.trim(k.text())!=n,d=$(".question-status"),i=function(a,b){return function(){return $.Deferred(function(g){null==b||b()?a.animate({opacity:0},150).promise().done(function(){g.resolve()}):g.resolve()})}},f=i(k,function(){return h}),m=i(a),i=i(d);$.when(f(),m(),i()).done(function(){h&&k.text(n).animate({opacity:1},150);var b=function(a,b){return new $.Deferred(function(g){b.css({opacity:0});a.replaceWith(b);b.animate({opacity:1},150,
function(){g.resolve()})})};b(a,c).done(function(){styleCode();StackExchange.question.bindSuggestedEditPopupLinks();j&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var f=$(g).filter(".question-status");f.length?(d.length||(d=$("<div>").addClass("question-status").insertAfter(e)),b(d,f)):d.remove()});window.history.pushState(b,"new post","#"+b.id)}},q=function(){var a=Object.keys(p).length;g(a);return $('<div class="new-post-activity">'+function(a){return 1==a.count?a.count+
" question with new activity":a.count+" questions with new activity"}({count:a})+"</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(a){var b=a.split(","),b=b[u%b.length];null!=b&&0!=b.indexOf("ws://")&&0!=b.indexOf("wss://")&&(b=("https:"===document.location.protocol?"wss://":"ws://")+b);if("WebSocket"in window||"MozWebSocket"in window){if(o)try{d("closing WebSocket"),o.close()}catch(g){}o||(d("opening WebSocket to: "+b),o="WebSocket"in window?new WebSocket(b):
new MozWebSocket(b),o.onopen=function(){A||(A=!0);u=0;d("WebSocket opened");i();h();setInterval(n,6E4)},o.onmessage=function(a){a=$.parseJSON(a.data);w.emitEvent(a.action,[a.data])},o.onclose=function(){o=null;d("WebSocket closed");5>u&&0<x&&(u++,x--,d("reconnect attempt:"+u+" max retries:"+x),setTimeout(function(){StackExchange.realtime.init(a)},1E3*((new Date).getTime()%50/20)))},o.onerror=function(){d("WebSocket failed");o=null})}},expandActiveQuestions:a,expandAnswers:function(){$("#tabs").show();
$("#new-answer-activity").remove();var a=$("#answers #answers-header"),b=a.find(".answers-subheader h2"),g=parseInt(b.text())+v.length;isNaN(g)&&(g=v.length);b.text(function(a){return 1==a.answerCount?a.answerCount+" Answer":a.answerCount+" Answers"}({answerCount:g}));$.ajax({url:"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({postIdsSemiColonDelimited:v.join(";")})}).done(function(b){var g=$('<div class="dno" />').append(b);g.insertAfter(a).fadeIn(400,function(){g.removeClass("dno");
styleCode();StackExchange.vote.init($(".question").data("questionid"));g.find(".answer").each(function(){StackExchange.comments.init({post:$(this)})})})});StackExchange.question.bindSuggestedEditPopupLinks();n();v=[]},subscribeToActiveQuestions:function(a,b,g,f,e,j,k){a=a+"-"+b;r=g;B=j;c(a);w.addListener(a,function(a){a=$.parseJSON(a);if(null!=e)for(var g=0;g<e.length;g++)if(-1==$.inArray(e[g],a.tags))return;m(a,f,b);null!=k&&k(a)})},subscribeToInboxNotifications:function(){if(null!=StackExchange.options.user.accountId){var a=
StackExchange.options.user.accountId+"-inbox";c(a);w.addListener(a,function(a){$(".unreadCount").remove();var b=$("<a>",{"class":"unreadCount",title:"unread messages in your inbox",text:a}).insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:b.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(a)})}},subscribeToQuestion:function(a,g){var j=a+"-question-"+g;c(j);w.addListener(j,function(a){a=$.parseJSON(a);if(a.acctid!=StackExchange.options.user.accountId)switch(a.a){case "score":var g=
$('.vote input[value="'+a.id+'"]').siblings(".vote-count-post");g.text()!=a.score&&(g.text(a.score),0==$(":animated").length&&g.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":b(a);break;case "answer-add":0==$("#answer-"+a.answerid).length&&(v.push(a.answerid),StackExchange.cardiologist&&(StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(e,5E3).trigger():e(),StackExchange.cardiologist.notifiedOfNewAnswer()));
break;case "accept":k(a);break;case "unaccept":k(a,!0);break;case "post-edit":f(a)}})},unsubscribeToQuestion:function(a,b){var g=a+"-question-"+b;d("unsubscribing: "+g);var f=$.inArray(g,y);-1!=f&&(y.splice(f,1),null==o||1!=o.readyState||o.send("-"+g))},subscribeToReputationNotifications:function(a){null!=StackExchange.options.user.accountId&&(a=a+"-"+StackExchange.options.user.userId+"-reputation",c(a),w.addListener(a,function(a){var b=$("#hlinks .reputation-score");b.text()!=a.score&&(0==$(":animated").length&&
b.fadeTo("fast",0.8).fadeTo("fast",1),b.text(a))}))},subscribeToSuggestedEdits:function(a){a+="-suggested-edits-count-update";c(a);w.addListener(a,function(){l()})},updateRelativeDates:n,subscribeToReviewDashboard:function(a){a+="-review-dashboard-update";c(a);w.addListener(a,function(a){var a=$.parseJSON(a),b=$('.dashboard-activity[data-review-task="'+a.i+'"]');0==b.find('.dashboard-user[data-user="'+a.u+'"]').length&&(b.find(".dashboard-user:nth-child(6)").remove(),b.children().css({left:"-44px"}),
b.prepend(a.html).children().animate({left:0}))})}}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(i){if(gauth.enabled()){var d=document.domain;"meta."==d.substr(0,5)&&(d=d.substr(4,d.length-4));var h=$.cookie("gauth");if(null==h)$.cookie("gauth",null,{path:"/",domain:d}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=d.charAt(0)&&(d="."+d);$.cookie("gauth",null,{path:"/",domain:d});$.cookie("gauth",null,{path:"/",domain:document.domain});var c=h.indexOf(":"),d=h.substr(0,c),h=h.substr(c+1),k=i+"/auth/global/write?authToken="+
encodeURIComponent(d)+"&nonce="+encodeURIComponent(h);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+k+"'></iframe>")})}}},checkStackAuth:function(i){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var d=function(h){if(h.origin==i)if("No Local Storage"==h.data)gauth.noGAuthStorage();else if("No Session"==h.data)gauth.noGAuthSession();else{var c=h.data.substr(0,h.data.indexOf(",")),h=h.data.substr(h.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:c,nonce:h},function(c){gauth.globallyAuthed(c)},"json")}};window.attachEvent?window.attachEvent("onmessage",d):window.addEventListener("message",d,!1);$.post("/users/login/global/request","",function(h){var c=i+"/auth/global/read?request="+encodeURIComponent(h.token)+"&nonce="+encodeURIComponent(h.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+c+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(i){if(i&&i.Message){var i=i.Message+" ",d,h=!1,c=""+window.location,k=c.indexOf("returnurl=");if(-1!=k){var b=c.indexOf("&",k);-1==b&&(b=c.length);d=decodeURIComponent(c.substring(k+10,b));d=/^(?:http:\/\/|\/)/.test(d)?d.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=c.indexOf("/users/login")&&
(h=!0,d=d||"/");StackExchange.helpers.showFancyOverlay({message:h?i+"<br>You are being redirected...":i+(d?'<a href="'+("javascript:window.location='"+d+"'")+'">Click here</a> to return to your last location.':'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!h,complete:function(){h&&(window.location=d)}})}}}}(),genuwine=function(){var i,d="",h,c,k=[],b=function(){return $(".genu").hasClass("genu-on")},l=function(){var a=$(".genu"),b=$("#seWrapper");if(0==
b.length||0<h||c){f();var b=$("#seWrapper"),j;0<h?(j=$("#seTabInbox"),p(j)):c?(j=$("#seTabNotices"),m(j)):(j=$("#seTabHot"),g(j));j.addClass("seCurrent")}if(j=a.hasClass("genu-on")){$(".unreadCountTab").remove();$("#portalLink .itemBoxNew").removeClass("itemBoxNew");b.fadeOut("fast");for(b=0;b<k.length;b++)k[b]();k=[];0<c&&$("#portalLink .unreadCount").text(""+c).addClass("newNotices").show().click(l)}else b.fadeIn("fast"),$("#portalLink .unreadCount").hide();a.toggleClass("genu-on",!j);-1==h&&$(a).ready(function(){$("#seTabInbox").hide()});
e($("#seTabInbox"),$("#seTabNotices"))},e=function(a,b){StackExchange.options.site.isNoticesTabEnabled&&c&&0==b.find(".unreadCountTab").length&&b.prepend('<span class="unreadCountTab newNotices">'+c+"</span>");0<h&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab">'+h+"</span>")},f=function(){$("#seWrapper").remove();var b='<div id="seWrapper" class="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+d+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+
(!StackExchange.options.user.isAnonymous?'<li><a id="seTabInbox">Inbox</a></li>':"")+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter"><a id="seClose">close</a></div></div>',f=$("#hlinks"),f=f.height()+f.offset().top+5;$(b).appendTo("#portalLink").css({top:f}).find("ul.seNavLinks a").click(function(){var b=$(this);$(".seNavLinks a").removeClass("seCurrent");
b.addClass("seCurrent");switch(b.attr("id")){case "seTabHot":g(b);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&a(b);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":p(b);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();$("#seContainerInbox").fadeIn("fast");
break;case "seTabNotices":m(b),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){l()})},m=function(a){0==$("#seContainerNotices").length&&x(a,"/notices/genuwine","json",j,!0)},j=function(a,b){for(var g='<div id="seContainerNotices" style="display:none">',f=0;f<b.length;f++){var j=b[f],n=j.text,h=j.is_unread,d=j.site_url,i=j.icon,m=j.hasOwnProperty("type")?' data-type="'+j.type.toString()+'"':
"";null!=j.switch_type&&(m=m+' data-sw-type="'+j.switch_type.toString()+'" data-sw-site="'+j.site_id.toString()+'"');g+='<div class="noticeBox'+(h?" itemBoxNew":"")+'"'+m+'><a href="'+d+'" class="siteLinkFavicon"><img src="'+i+'"></a><div class="siteInfo"><p>'+n+"</p></div></div>"}A(a,g+"</div>","notifications_popup.click");k.push(function(){c=0;e($("#seTabInbox"),$("#seTabNotices"))});c=0},a=function(a){x(a,d+"/genuwine/sites?callback=?&host="+document.location.host+(i?"&accountId="+i:""),"jsonp",
o)},g=function(a){0==$("#seContainerHot").length&&x(a,d+"/genuwine?callback=?","jsonp",n)},n=function(a,b){for(var g=$("<div/>"),f='<div id="seContainerHot" style="display:none">',c=0;c<b.length;c++)var j=b[c],e=j.SiteId,k='href="http://'+e+"/q/"+j.Id+'?hq=1"',n=parseInt(j.DisplayScore,10),h=j.Sid,f=f+('<div class="itemBox"'+(null==h?"":' data-sw-type="2" data-sw-site="'+h.toString()+'"')+"><a "+k+' class="seNumAnswer">'+n+'</a><div class="siteInfo"><p><a '+k+">"+g.text(j.Title).html()+'</a></p><a href="http://'+
e+'" class="siteLink">'+e+"</a></div></div>");A(a,f+"</div>")},a=function(a){x(a,d+"/genuwine/sites?callback=?&host="+document.location.host+(i?"&accountId="+i:""),"jsonp",o)},o=function(a,b){for(var g='<div id="seContainerSites" style="display:none">',f=0;f<b.length;f++)var c=b[f],j=c.Name,e='href="http://'+c.Id+'?as=1"',k=c.Sid,g=g+('<div class="itemBox"'+(null==k?"":' data-sw-type="3" data-sw-site="'+k.toString()+'"')+"><a "+e+' class="siteFavicon"><img src="'+c.FaviconUrl+'" alt="'+j+'"></a><div class="siteInfo"><p><a '+
e+">"+j+"</a></p><a "+e+' class="siteLink">'+c.Description+"</a></div></div>");A(a,g+"</div>")},p=function(a){-1!=h&&(0==$("#seContainerInbox").length||0<h)&&v(a)},v=function(a){x(a,"/inbox/genuwine","json",u,!0)},u=function(a,b){for(var g='<div id="seContainerInbox" style="display:none">',f=0;f<b.length;f++){var c=b[f],j='href="'+c.Url+'"',n='title="'+c.CreationDate+'"',d=c.Count,m=c.IsNew?" itemBoxNew":"",l=c.hasOwnProperty("ItemType")?' data-type="'+c.ItemType.toString()+'"':"";null!=c.SiteId&&
(l=l+' data-sw-type="7" data-sw-site="'+c.SiteId.toString()+'"');g+='<div class="itemBox'+m+'"'+l+"><a "+j+' class="siteLinkFavicon"><img src="'+c.FaviconUrl+'" alt="'+c.SiteUrl+'"></a><div class="siteInfo">';"careers message"==c.Type?g+="<p><a "+j+' style="font-weight:normal"><b>'+c.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":"invitation"==c.Type?(n=c.Count,g+="<p><a "+j+' style="font-weight:normal"><b>'+n+"</b> "+("invitation"+(1<n?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):
g+="<p>"+(1<d?d+" ":"")+c.Type+" on <a "+j+" "+n+">"+c.Title+"</a></p>";g+='<p class="inboxSummary">'+(c.Summary||"")+"</p></div></div>"}i&&5<=b.length&&(g+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+i+'?tab=inbox">more inbox messages &hellip;</a></div></div>');A(a,g+"</div>","inbox_popup.click");k.push(function(){h=0;e($("#seTabInbox"),$("#seTabNotices"))});h=0},y={},x=function(a,b,g,f,c){var j=a.attr("id");if(y[j])B();else{y[j]=!0;B();var e=function(){y[j]=
!1;StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:b,dataType:g,success:function(b){y[j]=!1;b&&(0<b.length||c)?f(a,b):e()},error:e,complete:function(){$("#seWrapper .seContainer").removeSpinner()}})}},A=function(a,b,g){b=$(b);b.prependTo("#seWrapper .seContainer");b.find(".itemBox a, .noticeBox a").click(function(){var a=$(this).closest(".itemBox, .noticeBox");g&&g.length&&StackExchange.gps.track(g,
{item_type:a.data("type")});var b=a.data("sw-type"),a=a.data("sw-site");null!=b&&null!=a&&StackExchange.gps.track("site.switch",{item_type:b,target_site:a})});a.hasClass("seCurrent")&&b.fadeIn("fast")},B=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner("#seWrapper .seContainer",{position:"relative",left:"10px",top:"10px"})},r=function(){var a=$("#portalLink .unreadCount"),b=a.css("margin-top");a.css({marginTop:-20,opacity:0}).show().animate({marginTop:b,opacity:1},
2E3)},w=function(){var a=$("#portalLink .unreadCount"),b=a.data("events");(!b||!b.click)&&0<a.length&&a.click(l)};return{isVisible:b,click:l,setUnreadCount:function(a){h=a;var g=$("#seTabInbox");0<a?($("#portalLink .unreadCount").text(h),g.hasClass("seCurrent")&&b()&&v(g),r()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");w()},animateInbox:r,init:function(a,g,f){var j=$(".genu");1<=j.length&&(j[0].onclick=null);i=a;d=j.attr("href");h=g;c=f;!(0<
h)&&StackExchange.options.site.isNoticesTabEnabled&&(99<c&&(c=99),0<c&&$("#portalLink .unreadCount").text(""+c).addClass("newNotices"),w());j.removeAttr("href").click(l);w();$(document).click(function(a){b()&&!$.contains($("#portalLink")[0],a.target)&&l()})}}}(),topbar=function(){function i(){d(!1);h("inbox",!1);h("achievements",!1);h("modInbox",!1)}function d(b){h("siteSwitcher",b,function(a){a.find("#js-site-filter-txt").typeWatch({highlight:!1,wait:100,captureLength:-1,callback:l})})}function h(j,
a,g){var n=m[j],d=m[j+"Button"],i=f[j],l=null!=i;if(d){if(!1===a){if(l){c(!1,d,null,i);return}if(null==n)return}"boolean"!=typeof a&&(a=l?!i.is(":visible"):null==n||!n.is(":visible"));null!=n?c(a,d,n,null):l?c(a,d,null,i):(i=f[j]=k(j).appendTo(m.corral),b(d,i),c(!0,d,null,i),l=d.data("url")||"/topbar/"+j,$.ajax({type:"GET",url:l,dataType:"html"}).done(function(f){n=m[j]=$(f).appendTo(m.corral);g&&g(n);a=i.is(":visible");b(d,n);c(a,d,n,null)}).always(function(){i.remove();f[j]=null}));if(!0===a)for(l=
0;l<e.length;l++){var u=e[l];u!=j&&h(u,!1)}}}function c(b,a,g,f){a.toggleClass(a.data("on-class"),b);g&&g.toggle(b);f&&f.toggle(b)}function k(b){var a=$("<div/>").append(StackExchange.helpers.getSpinnerImg()).html();return $(['<div class="topbar-dialog ',b,'-dialog dno"><div class="header">',a,'</div><div class="modal-content"/></div>'].join(""))}function b(b,a){var g=b.height(),f=b.offset().left-m.siteSwitcherButton.offset().left;a.css({top:g,left:f})}function l(b){var a=$(".js-other-sites li");
""==b?a.show():(b=a.filter('*:containsCI("'+b+'")').show(),a.not(b).hide())}var e=["siteSwitcher","inbox","achievements","modInbox"],f={},m={corral:null,siteSwitcher:null,siteSwitcherButton:null,inbox:null,inboxButton:null,achievements:null,achievementsButton:null,modInbox:null,modInboxButton:null};return{hideAll:i,init:function(){m.corral=$(".js-topbar-dialog-corral");m.siteSwitcherButton=$(".js-site-switcher-button").click(function(){d()});m.inboxButton=$(".js-inbox-button").click(function(){h("inbox",
void 0)});m.achievementsButton=$(".js-achievements-button").click(function(){h("achievements",void 0)});m.modInboxButton=$(".js-mod-inbox-button").click(function(){h("modInbox",void 0)});m.siteSwitcherButton.attr("href","#");$(document).click(function(b){var a;a:{for(a=0;a<e.length;a++){var g=m[e[a]];if(g&&g.is(":visible")){a=!0;break a}}a=!1}if(a){a:{for(a=0;a<e.length;a++)if((g=m[e[a]+"Button"])&&g[0]==b.target){a=!0;break a}a=!1}a=!a&&!$.contains(m.corral[0],b.target)}a&&i()})}}}();
StackExchange.notify=function(){function i(b,c){var e=$("#dismissed-messages");e.val(e.val()+"~"+b+(c?" "+c:"")+"~")}function d(b,c){var e=$("#dismissed-messages").val();return!e?!1:RegExp("~"+b+(c?" "+c:"")+"~").test(e)}function h(b,c,e){var a=parseInt($("body").css("margin-top").match(/\d+/)),b=c*a/b;e?$("body:not(.no-message-slide)").animate({marginTop:b+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",b+"px")}var c=0,k=function(b,e){var j=$("#notify-"+b+(e?"-"+e:""));-1==
b?$.cookie("m","0",{expires:90,path:"/"}):-1<b&&$.post("/messages/mark-as-read",{messagetypeid:b,id:e?e:null});i(b,e);c--;j.fadeOut("fast",function(){h(c+1,c,!0);j.remove()})},b=function(b){c++;if(d(b.messageTypeId,b.id))return!1;var e="";b.messageTypeId&&(e=' id="notify-'+b.messageTypeId+(b.id?"-"+b.id:"")+'"');e="<div"+e+' style="display:none"><span class="notify-close">'+$("<a>&times;</a>").attr("title","dismiss this notification").outerHTML()+'</span><span class="notify-text">'+b.text+"</span>";
if(b.showProfile)var j=encodeURIComponent("/users/"+b.userId+"?tab=badges&sort=recent"),e=e+(" "+('See your <a href="'+("/messages/mark-as-read?messagetypeid="+b.messageTypeId+"&returnurl="+j)+'">profile</a>.'));e=$(e+"</div>");e.find(".notify-close").click(function(){b.close&&b.close();k(b.messageTypeId,b.id)});$("#notify-container").append(e);return!0},l=function(){$("#notify-container div").fadeIn("slow")},e=function(c,e){var j=$('<div class="link-more">').append($("<a>").text(function(a){return 1==
a.numNotifications?"view "+a.numNotifications+" more notification":"view "+a.numNotifications+" more notifications"}({numNotifications:c})));$("#notify-container").append(j);j.click(function(){j.detach();for(var a=0;a<e.length;a++)b(e[a]);l()})};return{showMessages:function(f,k){for(var j=0,a=k?2:f.length,g=0;g<a&&g<f.length;g++)b(f[g])&&j++;h(c,j,!1);l();k&&j<f.length&&(a=f.slice(a),e(f.length-j,a))},show:function(c,e){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");
b({text:c,messageTypeId:e});l()},close:k,getMessageText:function(b){return $("#notify-"+b+" .notify-text").text()}}}();function moveScroller(){var i=$("#scroller").width(),d=function(){var d=$(window).scrollTop(),c=$("#scroller-anchor").offset().top,k=$("#scroller");d>c?k.height()>$(window).height()?k.css({position:"fixed",top:"",bottom:"0px",width:i}):k.css({position:"fixed",top:"0px",bottom:"",width:i}):d<=c&&k.css({position:"relative",top:"",bottom:""})};$(window).scroll(d).resize(d);d()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var i=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),i=!0);var d;if(d=!$(this).hasClass("prettyprint")){d=$(this);var h=$("#prettify-lang").text();""!=h?(d.addClass(h),d=!0):d=!1}d&&($(this).addClass("prettyprint"),i=!0)});i&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(i){function d(b,c){var e=$("<div id='"+i.id+"'/>").html(c),a=$("<div />").css({overflow:"hidden",position:"absolute","z-index":1002,width:1,height:1,top:0,left:0}).append(e).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(e.attr("id"));var g=i.showing(b,e),d={left:g.left};g.hasOwnProperty("bottom")?(d.bottom=g.bottom,d.top="auto"):d.top=g.top;var l;i.shown&&(l=function(){i.shown(b,e)});a.css(d).animate({height:e.outerHeight()+8,width:e.outerWidth()+8},
300,l);h=function(){a.stop().remove();i.removed&&i.removed(b,e);h=k=null};k=StackExchange.helpers.DelayedReaction(h,5);d=a;g.additional&&(d=d.add(g.additional));d.hover(k.cancel,k.trigger)}var h,c,k,b,l={},e=StackExchange.helpers.DelayedReaction(function(c,e){if(!b&&c){var j;i.cache&&"c_"+c in l?j=$.Deferred().resolve(l["c_"+c]):(j=$.ajax({type:"GET",url:c,dataType:"html"}),i.cache&&j.done(function(a){l["c_"+c]=a}));j.done(function(a){h&&h();""!=a&&d(e,a)})}},500);$(document).delegate(i.selector,
{mouseenter:function(){if(k&&this===c)k.cancel();else return c=this,e.trigger(i.getUrl(this),this),b=!1},mouseleave:function(){b=!0;e.cancel();k&&k.trigger()}})};
StackExchange.tagmenu=function(){function i(c){var c=$(c),b=c.attr("href");if(!b||"/"!=b.charAt(0))return null;b=c.text();if(-1<b.indexOf("*"))return null;c.attr("title","");return"/tags/"+encodeURIComponent(b)+"/subscriber-info"}function d(c,b){var d=$(c),e=d.offset(),f=d.outerHeight(),d={left:e.left},h=e.top+f,f=e.left+b.outerWidth();b.height()+h>$(window).height()+$(window).scrollTop()?d.bottom=$(window).height()-e.top-8:d.top=h;e=Math.max(1024,$(window).width());f>e&&(d.left-=f-e);return d}var h,
c;return{init:function(k){h=k;c||(c=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag,.no-tag-menu)",id:"tag-menu",getUrl:i,showing:d,shown:function(b,c){h&&h(c,$(b).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function i(d,b){var h=$(d).find("img:first"),e=h.offset(),f=h.height(),i=h.width(),j=Math.max(i,f),a=64*f/j,j=64*i/j,g=b.find("img:first").css({width:j,height:a}),n=g.offset();g.css("visibility","hidden");c=h.clone().css({position:"absolute",zIndex:1003,left:e.left,top:e.top,width:i,height:f}).appendTo("body");var o=function(){g[0].complete?(g.css("visibility","visible"),c.fadeOutAndRemove()):setTimeout(o,500)};c.animate({width:j,height:a,top:e.top+n.top},200,o);
return{top:e.top,left:e.left-n.left,additional:c}}function d(){c.remove()}var h,c;return{init:function(){h||(h=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(c){c=/\/users\/([^/]+).*$/.exec($(c).closest(".user-hover").find(".user-details a").attr("href"));return!c?null:"/users/user-info/"+c[1]},cache:!0,id:"user-menu",showing:i,removed:d}))}}}();
StackExchange.chatAd=function(){function i(){var a=$(".question .post-taglist .post-tag");return!a.length?null:a.map(function(a,b){return $(b).text()}).get().join(" ")}function d(a){return 10>a?"0"+a:a}function h(a){var b=new Date;b.setTime(1E3*a);return[b.getUTCFullYear(),"-",d(b.getUTCMonth()+1),"-",d(b.getUTCDate())," ",d(b.getUTCHours()),":",d(b.getUTCMinutes()),":",d(b.getUTCSeconds()),"Z"].join("")}function c(a){var b=Math.floor((new Date).getTime()/1E3)-a,g=b%60,c=Math.floor(b/60),e=Math.floor(b/
3600);if(1>b)return"just now";if(60>b)return function(a){return 1==a.seconds?a.seconds+" sec ago":a.seconds+" secs ago"}({seconds:g});if(3600>b)return function(a){return 1==a.minutes?a.minutes+" min ago":a.minutes+" mins ago"}({minutes:c});if(86400>b)return function(a){return 1==a.hours?a.hours+" hour ago":a.hours+" hours ago"}({hours:e});b=Math.floor(b/86400);if(1==b)return"yesterday";if(2>=b)return b+" days ago";a=new Date(1E3*a);return function(a){return a.month+" "+a.date+" at "+a.hours+":"+a.minutes}({month:p[a.getMonth()],
date:a.getDate(),hours:a.getHours(),minutes:d(a.getMinutes())})}function k(a){var b=$("<div />");b.text(a);return b.html().replace('"',"&quot;")}function b(){$.get(a,null,function(a,b,g){m(a,b,g)})}function l(a){if("!"==a.charAt(0)){a=a.substr(1);if(/^http:\/\/i.stack.imgur.com\//.test(a))var b=/\?/.test(a)?"&":"?",a=a+(b+"g&s=32");return a}return"https://www.gravatar.com/avatar/"+a+"?s=23&d=identicon&r=PG"}function e(a){for(var b=$('<div class="ad502-users" />'),g=0;g<a.length&&7>g;g++){var e=a[g],
f=e.name;e.lastPost&&(f+=": "+c(e.lastPost));var d=$('<a href="'+(j+"/users/"+e.id)+'" />');$("<img height='23' width='23' />").attr("title",f).attr("src",l(e.emailhash)).appendTo(d);b.append(d)}return b}function f(a){var b=a.user;return(a=a.userid)?'<a href="'+j+"/users/"+a+'">'+k(b)+"</a>":k(b)}function m(a){var d=$("#ad502-rooms");if(!a.error){d.html("");for(var i=a.rooms,l=0;l<i.length&&2>l;l++){var m=i[l],p=j+"/rooms/"+m.id,r=$('<div class="ad502-room"></div>');r.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+
k(m.name)+'"><a href="'+p+'">'+k(m.name)+"</a></span></h3>"));m.messages&&0<m.messages.length&&r.append($('<span title="'+h(m.lastPost)+'" class="ad502-last-message">'+c(m.lastPost)+" - "+f(m.messages[0])+"</span><br>"));m.singleImage?r.append($('<div class="ad502-users"><img src="'+j+"/rooms/users/"+m.id+'.jpeg" /></div>')):r.append(e(m.users));d.append(r)}1<a.activeUsers?$("#h-chat-link").text(a.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",
function(a){return 1==a.users&&1==a.rooms?a.users+" user active in "+a.rooms+" room the last 60 minutes":1==a.users?a.users+" user active in "+a.rooms+" rooms the last 60 minutes":1==a.rooms?a.users+" users active in "+a.rooms+" room the last 60 minutes":a.users+" users active in "+a.rooms+" rooms the last 60 minutes"}({users:a.activeUsers,rooms:a.activeRooms}))}g<=o&&window.setTimeout(b,1E3*g);g+=n}var j,a,g=180,n=30,o=480,p="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");/^\/questions\/\d+/i.test(window.location.pathname)&&
(o=0);return{init:function(g){j=g.chatUrl;a=g.reloadUrl;if(g.tagBased){var c=i();if(!c)return;a+=(/\?/.test(a)?"&":"?")+"tags="+encodeURIComponent(c)}null===g.preloadData?b():m(g.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var i={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(d){for(var h in i)i.hasOwnProperty(h)&&(d=d.replace(RegExp("["+h+"]","g"),i[h]));return d}}();
function sanitizeAndSplitTags(i,d){for(var i=$.trim(i).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),h=i.split(/[\s|,;]+/),c=[],k=0;k<h.length;k++){var b=h[k].toLowerCase();StackExchange.options.site.nonAsciiTags||(b=StackExchange.helpers.noDiacritics(b));b=b.replace(/_/g,"-");b=b.replace(RegExp("[^a-z0-9.#+"+(d?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");b=b.replace(/^[#+-]+/,"");b=b.replace(/[.-]+$/,"");0<b.length&&-1==$.inArray(b,c)&&"or"!=b&&"and"!=b&&c.push(b)}return c}
StackExchange.question=function(){function i(){$(window).off("hashchange.highlightDestination").on("hashchange.highlightDestination",function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?f(a[2],a[3]):m($(".answer[data-answerid="+a[1]+"]")))}).trigger("hashchange.highlightDestination")}var d=function(a,b,c,e,f,d){return $("<a>",{id:"share-"+e+"-"+a,"class":"share-"+e,title:b?"share link to this question on "+c:"share link to this answer on "+c,text:f,
"data-svc":d})},h=function(a,b){var c=null!=a;a||(a=$("div.question div.post-menu a.short-link"));var e=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))e.find(".close-share-tip").click();else{a.addClass("share-link");var f=a.attr("id").substring(10),j=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",h=a.closest("div.question").length,k="http://"+document.location.host+a.attr("href"),j=("answer"==j?"Answer:":"")+$("#question-header a").text(),
i='<div class="share-tip" style="display:none">'+(h?"share a link to this question":"share a link to this answer")+'<input type="text" style="display:block; width:292px;" value="'+k+'">';StackExchange.options.site.enableSocialMediaInSharePopup&&(i+=$("<div>",{id:"share-icons"}).append(d(f,h,"Google+","gp","share [g+]",1)).append(d(f,h,"Facebook","fb","share [fb]",2)).append(d(f,h,"Twitter","tw","share [tw]",3)).prop("outerHTML"));StackExchange.gps.track("share.show",{location:h?1:2});var l=$(i+'<a class="close-share-tip" style="float:right">close</a></div>');
StackExchange.options.site.enableSocialMediaInSharePopup&&(k=encodeURIComponent(k),j=encodeURIComponent(j),StackExchange.share.gplus($("#share-gp-"+f,l),k,j,"2"),StackExchange.share.facebook($("#share-fb-"+f,l),k,j,"2"),StackExchange.share.twitter($("#share-tw-"+f,l),k,j,"2"),$("#share-icons a",l).click(function(){l.fadeOutAndRemove();StackExchange.gps.track("share.click",{location:h?1:2,service:$(this).data("svc")})}));b&&l.find(".close-share-tip").before('<a id="link-post-'+f+'" style="float:left">cite</a>');
l.appendTo(e).fadeIn(c?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){l.fadeOutAndRemove()}).end().find("input[type=text]").select()}},c=function(a){var b=$("#post-form h2:first"),c=b.wrap("<div />").parent(),e=c.wrap("<div />").parent(),f=$("<div />").prependTo(e),d=e.height(),j=$("<div />"),a=$(a),h=parseInt(b.css("margin-bottom")),k=$("#content"),i=$("#wmd-input").outerWidth(),l=k.offset().left>b.offset().left-5&&"visible"!=k.css("overflow-x");
j.css({height:0,overflowY:"hidden"}).appendTo(c).append(a);e.css({height:d,position:"relative"});c.css({position:"absolute",bottom:-h,width:i});f.addClass("answer-help-background").css({position:"absolute",bottom:-h,height:0,width:i});l&&(f.css("left",0),c.animate({paddingLeft:5},1E3));j.animate({height:a.height()+h+10},1E3);f.animate({height:a.height()+h+10+d},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(c).fadeIn(1E3).find("a").one("click",function(a){var e=
$(this).parent();setTimeout(function(){e.remove()},1);j.animate({height:0},1E3,function(){j.add(f).remove();b.unwrap().unwrap()});f.animate({height:0},1E3);l&&c.animate({paddingLeft:0},1E3);a.preventDefault()})},k=function(){$.get("/posts/answer-help").then(c)},b,l,e,f=function(a,b){var c="#comment-"+a,e=$(c);e.length?m(e):StackExchange.comments.loadAll($("#comments-link-"+b)).done(function(){m($(c))})},m=function(a){var g=e;a.css({backgroundColor:b}).animate({backgroundColor:g},2E3,"linear",function(){$(this).css("background-color",
"")});a.is(".comment")&&a[0].scrollIntoView(!0)},j=function(a){a=a||{};$(".post-menu a.short-link").live("click",function(b){if(!b.ctrlKey&&!b.metaKey)return h($(this),a.showCitation),!1})};return{initTitleSearch:function(a,b,c){var e=document.title,f=0,d,j;a.attr("autocomplete","off");var h=function(h){var k=a.val();if(!(""==k||k==d&&!0!==h||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var i=k.split(" "),l=0,m=0;m<i.length;m++)0<$.trim(i[m]).length&&
l++;i=(new Date).getTime();m=(i-f)/1E3;!0!==h&&(3>l||5>m)&&!a.hasClass("edit-field-overlayed")||(f=i,d=k,c&&(document.title=k?k+" - "+c:e),b.empty(),StackExchange.helpers.addSpinner(b),j&&j.fadeOutAndRemove(),$.ajax({url:"/search/titles",dataType:"json",data:{title:k},success:function(a){if(a){if(a.notification){var c=StackExchange.postValidation.getSidebarPopupOptions();c.type="info";j=StackExchange.helpers.showMessage(b,a.notification,c)}a.content&&(b.html(a.content),setTimeout(function(){b.find(".answer-link a").attr("target",
"_blank")},1))}},complete:function(){StackExchange.helpers.removeSpinner(b)}}))}},k=!1;b.mouseenter(function(){k=!0}).mouseleave(function(){k=!1});a.keyup(h).blur(function(){var a=function(){f=0;h()};if(k)b.one("mouseleave",a);else a()});return function(a){f=0;h(a)}},showShareTip:h,getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");return a},initShareLinks:j,canViewVoteCounts:function(){return l},init:function(a){l=
a.canViewVoteCounts;StackExchange.question.fullInit?StackExchange.question.fullInit(a):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:a.autoShowCommentHelp});j(a);if(a.showAnswerHelp)$("#wmd-input").one("focus",k);a.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});e=a.backgroundColor;b=a.highlightColor;i()}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function i(d){var h=$(this),c=h.closest("div.vote"),k=h.prop("className"),b=/vote-up/.test(k),i=/vote-down/.test(k),e=/star/.test(k),k=h.closest(".answer").length;d.preventDefault();if(b||i)if(d=c.find("input").val(),StackExchange.options.isMobile)StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+d+"?voteTypeId="+(b?2:3)),b="Thank you for your feedback.<br />"+(k?function(b){return"Please "+b.startAnchor+"log in or register"+
b.endAnchor+" to vote for this answer."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}):function(b){return"Please "+b.startAnchor+"log in or register"+b.endAnchor+" to vote for this question."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"})),StackExchange.helpers.showMessage(h,b,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}});else{if(h="anon-vote-popup-"+d,!c.is(":working")&&
!$("."+h).length){c.data("working",!0);$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var f=$('<div class="anon-vote-popup popup">Sending feedback&nbsp;</div>').addClass(h).addSpinner();f.appendTo("body").center().fadeIn("fast");$.ajax({type:"POST",url:"/posts/popup/anon-vote/"+d+"?voteTypeId="+(b?2:3),dataType:"html",success:function(b){f.html(b)},error:function(){f.remove()},complete:function(){c.data("working",!1)}})}}else e&&($(".anon-vote-popup").fadeOutAndRemove(),
b=k?function(b){return"Please "+b.startAnchor+"log in or register"+b.endAnchor+" to favorite this answer."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}):function(b){return"Please "+b.startAnchor+"log in or register"+b.endAnchor+" to favorite this question."}({startAnchor:'<a href="/users/login?returnurl='+escape(document.location)+'">',endAnchor:"</a>"}),StackExchange.helpers.showMessage(h,b,{type:"info",position:{my:"left top",at:"right center"},
css:{"margin-left":"-10px"}}))}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var d=$(this);d.data("bound-anonymous")||(d.data("bound-anonymous",!0),d.click(i))});StackExchange.question.bindFetchAcceptedAnswerDates()};
StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var i=$(this);if(!i.is(":working")){i.working(!0);var d=i.closest(".answer").data("answerid");d?$.get("/posts/"+d+"/accepted-answer-date",function(d){i.attr("title",d)}):i.attr("title","")}})};
StackExchange.comments=function(){function i(b,c){this.postId=b;this.jDiv=c;this.jtBody=c.find(" > table > tbody");this.jCommentsLink=$("#comments-link-"+b)}function d(b){var d=(b.constructor===$?b:$(b)).closest(".question, .answer, div[id^='post-']").find(".comments"),b=d.attr("id").replace(/^comments-/,"");if(c[b])return c[b];d=new i(b,d);return c[b]=d}function h(){if(0!=$(".question[data-questionid]").length){var b=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var c=
$(this),e=c.closest(".answer"),f=e&&e.length?e.data("answerid"):0,e=c.closest(".comment").attr("id").substr(8),f=f?f:b,e="#comment"+e+"_"+f;0<location.href.indexOf("/questions/")?c.wrap('<a class="comment-link" href="{hash}"></a>'.formatUnicorn({hash:e})):c.wrap('<a class="comment-link" href="/q/{pid}/{hash}"></a>'.formatUnicorn({hash:e,pid:f}))})}}var c={},k=function(){};i.prototype={checkDiscussion:k,ensureInput:k,saveEditingComments:k,restoreEditingComments:k,commentsShown:function(){this.jtBody.data("remaining-comments-count",
0)},addShow:function(b){var c=this,e=this.loadAllComments().done(function(){c.checkDiscussion()}),f=this.ensureInput();f&&!b&&f.focus();e.done(function(){f&&0<f.length&&c.jCommentsLink.hide()})},ajax:function(b,c,e,f){e&&!f&&StackExchange.helpers.addSpinner(e,{"margin-left":"10px"});var d=this;return $.ajax(b).fail(function(b){var a=b.responseText;if(!a||0<=a.indexOf("<html"))a="An error occured"+(c?" "+c:"");StackExchange.helpers.showErrorMessage(e||d.jDiv,a,{"transient":409==b.status});e&&!f&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},
showComments:function(b,c){this.saveEditingComments(c);this.jtBody.html(b);this.restoreEditingComments();if(!0==this.jDiv.data("localized")){var e=this.jtBody.data("addlink-html");this.jCommentsLink.html($("<div/>").html(e).text());this.jtBody.data("addlink-disabled")&&!this.jCommentsLink.hasClass("disabled-link")&&this.jCommentsLink.addClass("disabled-link")}else this.jCommentsLink=$("#comments-link-"+this.postId),this.jCommentsLink.is(":visible")&&!c&&(e=$("#hidden-comments-link-"+this.postId).removeClass("dno").attr("id",
"comments-link-"+this.postId).show(),e.length&&(this.jCommentsLink.replaceWith(e),this.jCommentsLink=e));"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);h();this.commentsShown()},loadAllComments:function(b,c){this.jDiv.removeClass("dno");if(!b&&!/more comment/.test($("#comments-link-"+this.postId).text()))return $.Deferred().resolve().promise();var e=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments"+(c||""),dataType:"html"},"while fetching comments").done(function(b){e.showComments(b)}).promise()}};
return{init:function(b){b=b&&b.post||document;$(b).on("click","a[id^='comments-link-']",function(b){$(this).hasClass("disabled-link")||(b.preventDefault(),b=/more comment/.test($(this).text()),d(this).addShow(b))});b==document&&h()},loadAll:function(b,c){return d(b).loadAllComments(!0,c)},extendPostUi:function(b){for(var c in b)b.hasOwnProperty(c)&&(i.prototype[c]=b[c])},uiForPost:d}}();
StackExchange.share=function(){function i(d,c,k){window.open(d,c,k)||(window.location.href=d)}function d(d,c,k){var c=c+("="+("undefined"!==typeof k?k:"1")),k=d.indexOf("?"),b=d.indexOf("#");return-1==k?-1==b?d+"?"+c:d.substring(0,b)+"?"+c+d.substring(b):-1==b?d+"&"+c:d.substring(0,b)+"&"+c+d.substring(b)}return{gplus:function(h,c,k,b){c=d(c,"sgp",b);h.click(function(){i("https://plus.google.com/share?url="+c,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(h,
c,k,b){c=d(c,"stw",b);h.click(function(){i("http://twitter.com/share?url="+c+"&ref=twitbtn&text="+k,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(h,c,k,b){c=d(c,"sfb",b);h.click(function(){i("http://www.facebook.com/sharer.php?u="+c+"&ref=fbshare&t="+k,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(i,d){window.tagRenderer||(window.tagRendererRaw=function(h,c,k){var c=c||"",k=k||"a",b="";c||(i&&-1<$.inArray(h,i)?b="required-tag":d&&-1<$.inArray(h,d)&&(b="moderator-tag"));b=$("<"+k+">").addClass("post-tag").addClass(b).text(h);"a"===k.toLowerCase()&&b.attr({rel:"tag",href:c+"/questions/tagged/"+encodeURIComponent(h),title:"show questions tagged '"+h+"'"});return b.outerHTML()},window.tagRenderer=function(d,c,k){return $(tagRendererRaw(d,c,k))})}
function showFadingHelpText(i){i.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var i={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},d=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),h=function(c){return $(c).parent().hasClass("tag-editor")?i["tag-editor"]:i[$(c).attr("id")]};d.focus(function(){var c=h(this);d.each(function(){var b=h(this);b!=c&&$(b).hide()});var k=$(c);k.is(":visible")||showFadingHelpText(k)})}
$.fn.extend({postId:function(){var i=this.first();if(!i.hasClass("answer")||!i.hasClass("question"))i=i.closest(".answer, .question");return parseInt(i.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function i(c){c=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append($("<div />",{title:"close this popup (or hit Esc)","class":"popup-close",text:"\ufffd"})).append(c);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function d(){var c=
StackExchange.options.site.name,c=$(['<div style="text-align: left;"><h2 style="margin-bottom: 15px;">',"Subscribe to the "+c+" weekly newsletter",'</h2><p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">',function(c){return"Create an account on "+c.site+c.endAnchor+" or "+c.loginAnchor+"log in"+c.endAnchor+" if you already have one."}({site:c,loginAnchor:'<a href="/users/login?returnurl=/newsletter/signup/redirect">',endAnchor:"</a>"}),'</strong></p><form><label for="newsletter-email-input">Or, send newsletter emails to:</label> ',
$("<input>",{type:"text",id:"newsletter-email-input",maxlength:"100",title:"your email address"}).prop("outerHTML")," ",$("<input>",{type:"submit",id:"newsletter-email-submit",value:"Subcribe"}).prop("outerHtml"),"</form>",$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));c.find("form").submit(function(){var c=$(this),b=c.find("#newsletter-email-input"),d=c.find("#newsletter-email-submit"),e=$.trim(b.val());if(0==e.length)return!1;StackExchange.helpers.addSpinner(c);
$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:e},success:function(e){"confirmed"==e.status&&!e.error?(b.attr("disabled",!0),d.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==e.status&&!e.error?(b.attr("disabled",!0),d.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
c.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):c.showErrorMessage(e.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){c.showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},
complete:function(){StackExchange.helpers.removeSpinner(c)}});return!1});i(c)}function h(){var c=window.location.pathname.toLowerCase(),d="unknown";"/"==c?d="homepage":"/questions"==c?d="questionlist":0==c.indexOf("/users/edit")?d="userprofile":0==c.indexOf("/questions/tagged/")?d="questionlist_bytag":/^\/questions\/\d+/.test(c)&&(d="questionpage");return d}return{init:function(){StackExchange.using("gps",function(){StackExchange.gps.track("newsletter.show",{newsletter_type:h()},!0)});$("#newsletter-signup").click(function(){var c=
$(this);if(StackExchange.options.user.isAnonymous)return d(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(d){d.url?window.location.href=d.url:"confirmed"==d.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==d.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):
c.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},error:function(){c.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var c=$(window).height(),c=Math.min(600,c-100),c=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',
c,'px;"><iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',c,'" frameborder="0"></iframe></div>'].join("");i(c);return!1})},loader:function(c,d){var c=d||c,b=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:c},success:function(c){$("#newsletter-ad").remove();b.empty().append($(c))},complete:function(){b.attr("class","").attr("style","")}});d||(window.sessionStorage.tNewsletter=c+"-continued")}}}();
(function(i,d,h,c){var k=!("selectionStart"in i("<input type='text' />")[0]);i.fn.caret=function(b,i){var e,f,m=this[0];if("object"===typeof b&&"number"===typeof b.start&&"number"===typeof b.end)e=b.start,f=b.end;else if("number"===typeof b&&"number"===typeof i)e=b,f=i;else if("string"===typeof b)-1<(e=m.value.indexOf(b))?f=e+b[d]:e=null;else if("[object RegExp]"===Object.prototype.toString.call(b)){var j=b.exec(m.value);null!=j&&(e=j.index,f=e+j[0][d])}if("undefined"!=typeof e)return k?(j=this[0].createTextRange(),
j.collapse(!0),j.moveStart("character",e),j.moveEnd("character",f-e),j.select()):(this[0].selectionStart=e,this[0].selectionEnd=f),this[0].focus(),this;if(k)if(f=document.selection,"textarea"!=this[0].tagName.toLowerCase()){j=this.val();e=f[h]()[c]();e.moveEnd("character",j[d]);var a=""==e.text?j[d]:j.lastIndexOf(e.text);e=f[h]()[c]();e.moveStart("character",-j[d]);var g=e.text[d]}else e=f[h](),f=e[c](),f.moveToElementText(this[0]),f.setEndPoint("EndToEnd",e),a=f.text[d]-e.text[d],g=a+e.text[d];else a=
m.selectionStart,g=m.selectionEnd;e=m.value.substring(a,g);return{start:a,end:g,text:e,replace:function(b){return m.value.substring(0,a)+b+m.value.substring(g,m.value[d])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(i,d){function h(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var c=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;"><div class="popup-close">',$("<a>",{title:"close this popup (or hit Esc)",text:"\u00d7"}).prop("outerHTML"),"</div>",i,"</div>"].join("")),k=c.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(h);
$.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(k);k.submit(function(){StackExchange.helpers.disableSubmitButton(k);k.find('input[type="submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",data:k.serialize(),success:function(b){b.captchaError?(StackExchange.helpers.removeSpinner(),
StackExchange.helpers.enableSubmitButton(k),k.find(".form-error").html(b.captchaError),Recaptcha.reload()):(h(),d(b))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(k);StackExchange.helpers.showErrorMessage(k,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();
StackExchange.gps=function(){function i(){var e;e=localStorage[b];e=!e?[]:JSON.parse(e);if(0<e.length){for(var d=(new Date).getTime(),h=[],j=0;j<e.length;j++){var a=e[j],g=d-a.now;if(0>g||36E5<g||10<j){c(a);return}h.push(a)}0<h.length&&k(h)}}function d(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(b,c){h(c)}),delete StackExchange._gps_track)}function h(c){c&&StackExchange.options&&StackExchange.options.user&&(c.properties&&!c.properties.user_type&&(c.properties.user_type=StackExchange.options.user.user_type),
!c.ab&&StackExchange.options.user.ab&&(c.ab=StackExchange.options.user.ab));var d=localStorage[b];d?(d=JSON.parse(d),d.push(c),localStorage[b]=JSON.stringify(d)):localStorage[b]=JSON.stringify([c])}function c(c){var d=localStorage[b];if(d){for(var d=JSON.parse(d),c=JSON.stringify(c),h=-1,j=0;j<d.length;j++){var a=JSON.stringify(d[j]);if(c==a){h=j;break}}-1!=h&&(d.splice(h,1),0==d.length?localStorage.removeItem(b):localStorage[b]=JSON.stringify(d))}}function k(b){$.isArray(b)||(b=[b]);$.ajax({type:"POST",
url:"/gps/event",data:JSON.stringify(b),success:function(){for(var d=0;d<b.length;d++)c(b[d])}})}var b="gps-pending",l=!1;return{init:function(b){if(l)return!0;l=!0;if(!b||!window.localStorage)return StackExchange.gps.track=function(){},delete StackExchange._gps_track,!1;d();i();return!0},track:function(b,c,d){b={evt:b,properties:c||{},now:(new Date).getTime()};h(b);d||k(b)},sendPending:i}}();
StackExchange.openid=function(){function i(b){b&&StackExchange.gps.track("openid.click",{openid_provider:b,location:l},!0)}function d(b,c){var d=c.find(".option-extra-fields");d.hide();c.find(".yahoo-button").click(function(){d.hide();h(b,"yahoo")});var a=function(a){var e="."+a+"-option";d.show();d.find("> div:not("+e+")").hide();d.find(e+", .extra-field-container").show();c.find(".extra-field").val("").focus();e=c.find(".extra-field-submit");e.unbind("click");e.click(function(){h(b,a,c.find(".extra-field").val())})};
c.find(".blogger-button").click(function(){a("blogger")});c.find(".aol-button").click(function(){a("aol")})}function h(b,c,d){c=e[c];d&&(c=c.replace("{username}",d));b.find(".use-facebook").val("false");b.find(".manual-openid").val(c);b.find(".submit-openid").click()}function c(b){b.find(".use-facebook").val("true");b.find(".manual-openid").val("");b.find(".submit-openid").click()}function k(b){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(b)})}}
function b(b,c,d,a){var g=b.find(".manual-openid").val();b.find(".use-facebook").val();k(function(){var b=$('<form method="post" action="/users/authenticate?returnurl='+encodeURIComponent(c)+'"></form>');if(g){var e=$('<input type="hidden" name="openid_identifier" />');b.append(e);e.val(g)}else{var e=$('<input type="hidden" name="oauth_version" />'),f=$('<input type="hidden" name="oauth_server" />');b.append(e);b.append(f);e.val("2.0");f.val("https://www.facebook.com/dialog/oauth")}b.append("<input type='hidden' name='fkey' value='"+
StackExchange.options.user.fkey+"' />");d&&a&&($('<input type="hidden" name="anon_vote_type" />').val(d).appendTo(b),$('<input type="hidden" name="anon_vote_hash" />').val(a).appendTo(b));StackExchange.navPrevention.stop();b.hide().appendTo("body").submit()})()}var l="unknown",e={yahoo:"http://yahoo.com/",google:"https://www.google.com/accounts/o8/id",aol:"http://openid.aol.com/{username}",blogger:"http://{username}.blogspot.com/"};return{initPostLogin:function(e,m){var j=decodeURIComponent(m);"/questions/ask"===
j&&(l="question_ask");var a=$(e),g=a.find(".new-login-left"),n=a.find(".new-login-right"),o=g.find(".show-more-options");o.click(function(){o.hide();n.show();return!1});n.find(".hide-more-options").click(function(){o.show();n.hide();return!1});a.removeClass("dno");d(a,n);g.find(".google-login").click(function(){i("Google");h(a,"google")});g.find(".facebook-login").click(function(){i("Facebook");c(a)});g.find(".stackexchange-login").click(k(function(){i("Stack Exchange");StackExchange.navPrevention.stop();
window.location="/users/login#create-account"}));a.find(".submit-openid").click(function(){b(a,j)})},initAnonVotePopup:function(d,e,j,a){var g=decodeURIComponent(e);l="votedialog";d.find(".google-login").click(function(){i("Google");h(d,"google")});d.find(".facebook-login").click(function(){i("Facebook");c(d)});d.find(".stackexchange-login").click(function(){i("Stack Exchange");window.location="/users/login#create-account"});d.find(".submit-openid").click(function(){b(d,g,j,a)})}}}();
StackExchange.loggedIn={};
var profileLink=function(){var i,d=!1,h,c,k=function(){return $(".profile-link")},b=function(a){a||(a=k());return a.hasClass("profile-link-on")},l=function(a,b){b.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},e=function(a){if(!a.data("loading")){a.data("loading",!0);var b=a.find(".profile-wrapper");b.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(b).fadeIn("fast");b.find(".profile-footer").click(profileLink.click);
f()},error:function(){a.data("loading",!1)},complete:StackExchange.helpers.removeSpinner})}},f=function(){var a=new Date;a.setTime(a.getTime()+1E3*c);var b=a.getUTCHours(),a=a.getUTCMinutes();10>b&&(b="0"+b);10>a&&(a="0"+a);$(".profile-popup .popup-clock .popup-time").text(b+":"+a)},m=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){j.cancel()}}),j=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){m.cancel()}}),a=
function(a){a.hover(m.trigger,j.trigger)};return{init:function(g,e,j,f){var h=k(),i=$(".profile-triangle");h.attr("href");d=e;$(location).attr("pathname");c=f||0;i.click(profileLink.click);e||a(h.add(i));$(document).click(function(a){b(h)&&a.target!=h[0]&&a.target!=i[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=k();j.cancel();m.cancel();b(a)?profileLink.hide():profileLink.show()},show:function(c,j){if(!c||"number"==typeof c)c=k();j||(j=$(".profile-popup"));
if(!j.length){var o=c,m=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"></div></div>');m.insertBefore(o);d||a(m);j=m}b(c)||(j.fadeIn("fast"),e(j),l(!0,c),h=new Date);i||(i=setInterval(f,2E4),f())},hide:function(a,c){if(h&&!(500>(new Date).getTime()-h.getTime())){if(!a||"number"==typeof a)a=k();c||(c=$(".profile-popup"));b(a)&&(c.fadeOut("fast"),l(!1,a));i&&(clearInterval(i),i=null)}}}}();
StackExchange.tagPreferences=function(){function i(a,b,c){var d="";"undefined"!=typeof forUserId&&(d=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:b,forUserId:d},c)}var d=[],h=$('<table><tr><td class="vt"><input type="text" id="interestingTag" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),c=$('<table><tr><td class="vt"><input type="text" id="ignoredTag" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),
k=function(a,b){return a.map(function(a,b){return $(b).text()}).filter(function(a,c){if(!b)return!0;var d;/\*/.test(c)&&(d=RegExp(c.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<b.length;a++){var g=b[a];if(c===g||d&&d.test(g))return!1}return!0}).map(function(a,b){var c;c=b.replace(/#/g,"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(c)?"div.tags:regex(class, t-"+c.replace(/\*/g,".*")+")":"div.t-"+c}).get().join(",")},b=function(a,b,c,d,g,j){for(var h=$(a).val(),
f=sanitizeAndSplitTags(h,!0),k=!1,t=0;t<f.length;t++)0!=$.trim(f[t]).length&&($(b).children().each(function(){$(this).text()==f[t]&&($(this).fadeTo(500,0.1).fadeTo(500,1),k=!0)}),k||(h=$.URLEncode(f[t]),h=$("<a>").attr({id:f[t],href:"/questions/tagged/"+h,"class":d,title:"show questions tagged '"+f[t]+"'"}).text(f[t]),$(b).append(h),$(b).append(" "),l(c)),k=!1);$(a).val("");g&&$(a).focus();j||i(c,$(b).text());e()},l=function(a){a=20==a?"#interestingTags > .post-tag:last":25==a?"#ignoredTags > .post-tag:last":
40==a?"#interestingTags > .post-tag":45==a?"#ignoredTags > .post-tag, #remainingIgnored > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag";$("<span>").addClass("delete-tag").attr("title","remove this tag").appendTo($(a)).click(function(a){var a=$(a.target).closest(".post-tag"),b=a.closest("div"),c=b.is("#ignoredTags")?25:b.is("#interestingTags")?20:-1;-1===c?console.log("removeTag: unknown container. Stopping execution. '"+b.text()+"'"):(a.remove(),i(c,b.text()),e());return!1})},
e=function(a,b){if(b)for(var c=0;c<b.length;c++)-1==d.indexOf(b[c])&&d.push(b[c]);var b=d,c=$("#ignoredTags > a, #remainingIgnored > a"),g=$("#interestingTags > a");if(!a||!(0==c.length&&0==g.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");c=k(c,b);g=k(g,b);if(0<c.length){var e=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(c).closest("div.question-summary").addClass(e)}0<g.length&&$(g).closest("div.question-summary").addClass("tagged-interesting")}},
f=function(a,c){var d=$("#tag-menu"),g;"favorite"==c&&(g=$("#ignoredTags a").filter(function(){return $(this).text()==a}),g.add(g.next()).remove(),$("#interestingTag").val(a),b("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==c&&(g=$("#interestingTags a").filter(function(){return $(this).text()==a}),g.add(g.next()).remove(),$("#ignoredTag").val(a),b("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==c&&(g=$("#ignoredTags a").filter(function(){return $(this).text()==a}),
g.add(g.next()).remove(),g=$("#interestingTags a").filter(function(){return $(this).text()==a}),g.add(g.next()).remove(),e());StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/favorite",data:{action:c,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(b){j(d.html($(""+b)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},m=function(a,b){var c=$("#tag-menu");StackExchange.helpers.addSpinner(c);$.ajax({type:"POST",url:"/tags/"+
encodeURIComponent(a)+"/subscription",data:{unsubscribe:b,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(b){j(c.html($(""+b)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},j=function(a,b){a.find(".tm-se-subscription").click(function(){m(b,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?f(b,"ignore"):$(this).hasClass("tm-favorite-clear")?f(b,
"favorite"):$(this).hasClass("tm-favorite-ignore")&&f(b,"clear")})},a=function(a){a&&l(40);$("#add-interesting").append(h);h.find("#interestingAdd").unbind("click").bind("click",function(){b("#interestingTag","#interestingTags",20,"post-tag user-tag",!0);$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")});p()},g=function(a){a&&l(45);$("#add-ignored").append(c);c.find("#ignoredAdd").unbind("click").bind("click",
function(){b("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")});p()},n=function(a){if($.contains(document.documentElement,a.target)&&!$(a.target).closest("#interesting-tags").length){var a=0<$("#interestingTags > .post-tag").length,b=0<$("#ignoredTags > .post-tag, #remainingIgnored > .post-tag").length;a?($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),
$("#addInterestingTag").removeClass("dno").addClass("dno")):($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno").addClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"));b?($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")):($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"));
$("#interesting-tags .delete-tag").remove();u();$(document).off("click",n)}},o=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno");a(!1)});$("#addIgnoredTag").on("click",function(){$(this).addClass("dno");g(!1)});$("#edit-interesting").on("click",function(){$(this).addClass("dno");$("#tag-subscriptions").removeClass("dno");a(!0)});$("#edit-ignored").on("click",function(){$(this).addClass("dno");g(!0)});$("#showRemainingIgnored").on("click",function(){$("#showRemainingIgnored").addClass("dno");
$("#remainingIgnored").removeClass("dno")})},p=function(){$(document).on("click",n)},v=!1,u=function(){v&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{applyPrefs:e,isIgnored:function(a){var b=$("#ignoredTags > a, #remainingIgnored > a");if($("#hideIgnored").is(":checked")&&(b=k(b,!0),0<b.length))return 0<$(a).find(b).length},forceEditMode:function(){v=!0},init:function(){StackExchange.tagmenu.init(j);0!=$("#interestingTags").length&&
(o(),p(),$("#hideIgnored").click(function(){i(30,$(this).is(":checked"));e()}),u())}}}();
StackExchange.question.fullInit=function(i){window.votesCast=i.votesCast;StackExchange.vote.init(i.questionId);StackExchange.question.bindSuggestedEditPopupLinks();StackExchange.vote_bounty.init(i);if(/^#autocomment/.test(window.location.hash)){var d=$(".comments-link:first"),h="#comment-"+window.location.hash.substring(12),c=function(){var c=$(h),b=$("<span><b>Trivial answer converted to comment</b></span>");c.find(".comment-date").append($("<br>")).append(b);c.css({backgroundColor:i.highlightColor});
c.animate({backgroundColor:i.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(h)[0].scrollIntoView(!0)};i.totalCommentCount&&i.shownCommentCount&&i.totalCommentCount!=i.shownCommentCount?StackExchange.comments.loadAll(d).done(c):c()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function i(d){var h=d.parent(),c=d.attr("id").substring(13);d.data("working")||(d.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+c,dataType:"html",success:function(c){var c=$(['<div id="lightbox-panel" class="popup popup-suggested-edit" style="display: block;"><div class="popup-controls"><div class="handle"></div><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div></div><div class="suggested-edit-container">',
c,"</div></div>"].join("")),b=$(window).height();c.find(".popup-suggested-edit").css({"max-height":b-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo(h).css("height","600px").center().css("height","").fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()});StackExchange.helpers.bindMovablePopups()},error:function(c){h.showErrorMessage(c.responseText&&200>c.responseText.length?c.responseText:
"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();d.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){i($(this));return!1})})};
StackExchange.vote=function(){var i=StackExchange.helpers,d={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},h=function(a){var a=a?a.closest("div.vote"):$("div.vote"),b=0<$("body.read-only").length;a.find(".vote-up-off, .vote-down-off").each(function(){var a,c,d,g=$(this);b?a="Voting is disabled while the site is in readonly mode":(a=g.hasClass("vote-up-off"),c=(a?m:j)(g),d=0<g.closest(".answer").length,
a=(d?a?"This answer is useful":"This answer is not useful":a?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful")+(StackExchange.loggedIn&&c?" (click again to undo)":""));g.attr("title",a)})},c=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){l($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){e($(this))})},k=function(a){$.each(a,function(){var a=$("div.vote:has(input[value="+
this.PostId+"])");switch(this.VoteTypeId){case d.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case d.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case d.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},b=function(a){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+a+
"/votes",dataType:"json",success:k}):k(window.votesCast);c();h()},l=function(a){var b=a.parent().find(".vote-up-off"),c=a.parent().find(".vote-down-off"),e=m(b),f=j(c);n(a,e?-1:f?2:1);g(b,c);e||b.addClass("vote-up-on");o(a,e?d.undoMod:d.upMod)},e=function(a){var b=a.parent().find(".vote-up-off"),c=a.parent().find(".vote-down-off"),e=j(c),f=m(b);n(a,e?1:f?-2:-1);g(b,c);e||c.addClass("vote-down-on");o(a,e?d.undoMod:d.downMod)},f=function(){return $("div.vote a[id^='vote-accepted-']")},m=function(a){return a.hasClass("vote-up-on")},
j=function(a){return a.hasClass("vote-down-on")},a=function(a){return a.closest("div.vote").find("input[name=_id_]").val()},g=function(a,b){a.removeClass("vote-up-on");b.removeClass("vote-down-on")},n=function(a,b){var c=a.siblings("span.vote-count-post"),d;if(0<c.find(".vote-count-separator").length){d=parseInt(c.children(":first").text(),10);var g=Math.abs(parseInt(c.children(":last").text(),10));d-=g;s(c)}else d=parseInt(c.text(),10);c.text(d+b)},o=function(b,c){(b?b.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click");
var d=a(b);p(b,d,c,v,{ltu:b.closest("div.vote").find("input[name=_ltu_]").val()})},p=function(a,b,c,d,g,e){var f={fkey:StackExchange.options.user.fkey};if(g)for(var j in g)f[j]=g[j];var h=function(){$.ajax({type:"POST",url:"/posts/"+b+"/vote/"+c,data:f,dataType:"json",success:function(c){c.Warning?confirm(c.Message)?(f.ignoreWarnings="true",h()):e&&e():(d(a,b,c),e&&e())},error:function(){a.parent().showErrorMessage("An error has occurred - please retry your request.");e&&e()}})};h()},v=function(a,
b,e){if(e.Success){e.Message&&a.parent().showInfoMessage(e.Message);if(e.ShowShareTip){var f=$(a).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(f)}e.LastVoteTypeId==d.upMod?$(document).trigger("upVote",b):e.LastVoteTypeId==d.downMod?$(document).trigger("downVote",b):$(document).trigger("undoVote",b)}else if(window.console&&window.console.firebug&&(!e.Message||5>e.Message.length))a.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");
else if(e.Message?a.parent().showErrorMessage(e.Message,{"transient":!0}):a.parent().showErrorMessage("An error has occurred - please retry your request."),g(a,a),a.parent().find("span.vote-count-post").text(e.NewScore),e.LastVoteTypeId){var b=e.LastVoteTypeId,j;b==d.upMod?(f=".vote-up-off",j="vote-up-on"):b==d.downMod&&(f=".vote-down-off",j="vote-down-on");f&&a.closest("div.vote").find(f).addClass(j)}c(a.parent());h(a)},u=function(){$(".star-off:not(.disabled)").live("click",function(a){y($(this));
a.preventDefault()})},y=function(b){if(!b.data("loading")){b.data("loading",!0);var c=a(b)||b.siblings("input[type=hidden][name=_id_]").val(),g=b.parent().find("div.favoritecount b"),e=parseInt("0"+g.text().replace(/^\s+|\s+$/g,""),10),f=function(){b.hasClass("star-on")?(b.removeClass("star-on"),g.removeClass("favoritecount-selected").text(0>=e--?"":e)):(b.addClass("star-on"),g.addClass("favoritecount-selected").text(++e))};f();p(b,c,d.favorite,function(a,c,d){b.data("loading",!1);d.Success||(f(),
b.parent().showErrorMessage(d.Message))})}},x=function(a,b){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(c){c.preventDefault();var c=$(this),g=c.attr("id").substring(12),e=-1<c.text().indexOf("undelete"),f=c.data(e?"undelete-prompt":"delete-prompt");f||(f=StackExchange.options.user.isModerator?"":e?"Vote to undelete this post?":"Vote to delete this post?");confirm(f)&&p(c,g,e?d.undeletion:d.deletion,a||A,b)}).unbind("hover").die("hover").live("hover",
function(){var a=$(this);if(a.hasClass("load-tooltip-on-hover")){a.removeClass("load-tooltip-on-hover");var b="/posts/"+a.attr("id").substring(12)+"/delete-tooltip";$.get(b,function(b){a.attr("title",b)})}})},A=function(a,b,c){var d=-1<a.text().indexOf("undelete");c&&c.Success?(a.text(c.Message),a.addClass("load-tooltip-on-hover"),0>c.NewScore?(a=0<$(".question:has(a[id='delete-post-"+b+"'])").length?".question, div.answer":"#answer-"+b,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),
a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):a.parent().showInfoMessage(d?"Your undelete vote has been recorded":"Your delete vote has been recorded")):(d=c&&c.Message?c.Message:d?"A problem occurred during undeletion":"A problem occurred during deletion",i.showErrorMessage(a.parent(),d))},B=function(){var a=$(this),
b=a.attr("id").substring(14),c=f();a.is(":working")||(a.parent().addSpinner(),c.working(!0),p(a,b,d.acceptedByOwner,function(b,g,e){e.Success?(c.removeClass("vote-accepted-on"),parseInt(e.Message,10)==d.acceptedByOwner&&a.addClass("vote-accepted-on")):a.parent().showErrorMessage(e.Message,{"transient":0==e.Message.indexOf("You can accept")});a.parent().removeSpinner();c.working(!1).trigger("update")}))},r=function(){var a=$(this),b=a.hasClass("vote-accepted-on")?"unaccept":"accept";a.attr("title",
a.data("title-"+b)).text(a.data("verb-"+b))},w=!1,z=function(a){if(!w){w=!0;var b=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".formatUnicorn({postId:b}),dataType:"json",success:function(b){StackExchange.helpers.removeMessages();a.html('<div style="color:green">'+b.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+b.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",
function(a){return a.upCount+" up / "+a.downCount+" down"}({upCount:Math.abs(+b.up),downCount:Math.abs(+b.down)}))},error:function(b){a.removeSpinner().parent().showErrorMessage(b.responseText&&100>b.responseText.length?b.responseText:"An error occurred during vote count fetch",{"transient":409==b.status})},complete:function(){w=!1}})}},s=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){z($(this))}).data("bound",
!0)},q=function(a){b(a);$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&
$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();u()};return{init:function(a){!StackExchange.options.user.isRegistered?StackExchange.question.bindAnonymousVoteDisclaimers():q(a);f().not(":data(bound)").on({click:B,update:r}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();StackExchange.question.canViewVoteCounts()&&
s();x()},up:l,down:e,vote_init:b,favorite_init:u,delete_init:x,bindFetchVoteCounts:s,highlightExistingVotes:k,submit:p,voteTypeIds:d,getPostId:a}}();
StackExchange.vote_closingAndFlagging=function(){function i(a){$("#popup-close-question").remove();var b=s.closest(".post-menu");0==b.length&&(b=s.parent());0<=s.text().indexOf("close")&&s.addSpinnerAfter({padding:"0 3px"});return $.ajax({type:"GET",url:"/flags/questions/{questionId}/close/popup".formatUnicorn({questionId:z}),dataType:"html"}).done(function(c){q=$(c).elementNodesOnly();q.appendTo(b);d();r&&r.closeShowPopup?r.closeShowPopup(q,s):a&&q.center().fadeIn("fast");StackExchange.helpers.bindMovablePopups()}).fail(function(a){a.responseText?
b.showErrorMessage(a.responseText,{"transient":409==a.status}):b.showErrorMessage("Unable to load popup - please try again")}).always(function(){StackExchange.helpers.removeSpinner()})}function d(){q.find(".popup-close").click(function(){StackExchange.helpers.closePopups(".popup")});q.on("popupClose",function(){t&&t.remove()});q.find("input[type=radio]").click(k);$("#close-question-form").submit(function(a){a.preventDefault();g();return!1});$(".retract-close-vote").click(function(){y($(this))});$(".action-list a").attr("target",
"_blank");h();c()}function h(){var a=$(".close-as-duplicate-pane"),b=a.find("#search-text");a.on("show",function(){$("#search-text").focus();$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling");b.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){j(b)}})}function c(){var a=q.find(".off-topic-other-comment-container"),b=a.find("textarea"),c=a.closest("li").find("input[type=radio]"),d=$.trim(b.val());
b.charCounter({target:a.find(".text-counter"),min:30,max:500,setIsValid:function(a){a=a&&$.trim(b.val())!=d;q.find(".popup-submit").enable(a)}});c.click(function(){a.show();b.focus();var c=b.val();b.val("").val(c)});b.focus(function(){c.is(":checked")||c.attr("checked","checked")})}function k(){var a=$(this),c=a.closest("li");if(!c.hasClass("action-selected")){var d=q.find(".popup-subpane").filter(function(){var b=a.data("subpane-name");return b&&b==$(this).data("subpane-name")}),g=q.find(".popup-submit");
d.length?(b(d,$(".popup-active-pane"),!0),d.hasClass("handles-submit-button-enabling")||g.disable()):(g.enable(),q.find(".popup-active-pane li.action-selected").removeClass("action-selected"),c.addClass("action-selected"))}}function b(a,c,d){q.find(".popup-active-pane").removeClass("popup-active-pane").hide();q.find(".popup-title").html(a.data("title"));d&&(d=c.data("breadcrumb")||c.data("title"),e(d,function(){b(c,a,!1);l(a)}));l(a);a.addClass("popup-active-pane").show().trigger("show").asyncLoad()}
function l(a){a.find("input[type=radio]:checked").removeAttr("checked");a.find("li.action-selected").removeClass("action-selected");q.find(".popup-submit").disable()}function e(a,b){var c=$(".popup-title-container .popup-breadcrumbs"),d=$("<span>").addClass("breadcrumb");$("<a>").text(a).click(function(){d.nextAll().andSelf().remove();b()}).appendTo(d);$("<span>").addClass("arrow").html("&gt;").appendTo(d);d.appendTo(c)}function f(){e("Flagging",function(){q.hide();t.fadeIn("fast");b(q.find("#pane-main"),
q.find(".popup-active-pane"),!1)})}function m(b){b=b.find(".list-originals");0==b.children().length?b.hide():(b.show(),a(b,!0),styleCode(),b.find(".item").click(function(){var a=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),b=$("#search-text").hideHelpOverlay().val(a.attr("href"));j(b,a);return!1}).hover(function(){$(this).toggleClass("hover")}))}function j(b,c){var d=b.closest(".popup-subpane"),g=d.find(".preview"),e=d.find(".list-container"),f=d.find(".search-errors").empty(),
j=$("#original-question-id"),h=d.closest("#popup-close-question").find(".popup-submit");h.disable();g.html("").hide();0!=$.trim(b.val()).length&&(c||d.find(".search-spinner").addSpinner(),$.ajax({type:"GET",url:"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),data:{q:b.val()},dataType:"html"}).done(function(b){b=$(b).elementNodesOnly().mathjax();if(b.hasClass("show-original"))e.hide(),a(b),g.empty().append(b).show(),b.find(".question .show-title a").attr("target",
"_blank"),b.find(".post-tag").addClass("user-tag"),j.val(b.find(".question").data("questionid")),h.enable();else if(b.hasClass("list-originals"))e.empty().append(b).show(),m(e);else throw"these are not the results you were looking for";}).fail(function(a){f.text(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred while searching; please try again");h.disable();j.val("");d.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()}))}
function a(a,b){var c=$(".close-as-duplicate-pane .original-display").find(".navi-container"),d=a.find(".navi"),g=$("#search-text");if(b)c.empty();else{var e=c.find(".navi");if(1!=e.length)return;e.empty();$("<a>").text(e.data("abbr")).click(function(){e.html(e.data("text")).siblings().remove();c.siblings(".preview").hide();c.siblings(".list-container").show();$("#original-question-id").val("");$("#popup-close-question").find(".popup-submit").disable();$(".close-as-duplicate-pane").find(".search-errors").empty();
g.val(e.data("search-text")).focus()}).appendTo(e)}d.data("search-text",g.val()).text(d.data("text")).prependTo(c)}function g(){var a=q.find(".popup-submit");a.attr("disabled")||($(".remaining-votes").addSpinner({position:"absolute",margin:"18px 0 0 3px"}),a.disable(),a=function(a,b){return q.find(a+' input[type=radio][name="'+b+'"]:checked').val()},$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,
closeReasonId:a("#pane-main","close-reason"),duplicateOfQuestionId:$("#original-question-id").val(),closeAsOffTopicReasonId:a(".close-as-off-topic-pane","close-as-off-topic-reason"),belongsOnBaseHostAddress:a(".migration-pane","migration"),offTopicOtherText:q.find(".off-topic-other-comment-container textarea").val(),offTopicOtherCommentId:q.find(".close-as-off-topic-pane input[type=radio]:checked").data("other-comment-id"),originalOffTopicOtherText:q.find('.off-topic-other-comment-container input[name="original_text"]').val()}}).done(function(a){o(a)}).fail(function(){s.parent().showErrorMessage("An error occurred; please try again")}).always(function(){q.find(".popup-close").click()}))}
function n(){s.is(":working")||(s.working(!0).addSpinner({margin:"0 3px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/reopen/add".formatUnicorn({questionId:z}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){o(a)}).fail(function(){s.working(!1).parent().showErrorMessage("An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function o(a){a.isClose="QuestionClose"==a.FlagType;a.isRecommendClose="QuestionRecommendClose"==
a.FlagType;a.isReopen="QuestionReopen"==a.FlagType;a.verb=a.isRecommendClose?"flag":a.isReopen?"reopen":"close";var b=s;a.isClose&&s.is('[class*="flag-post-"]')&&(b=s.parent().find("a[class*='close-question']"));a.Success?p(a,b):u(a,b)}function p(a,b){if(!r||!r.closeCallback||!r.closeCallback(b,a,a.isRecommendClose)){var c=function(){var a=window.location.href.splitOnLast("#")[0];0>a.indexOf("noredirect=1")&&(a+=(0>a.indexOf("?")?"?":"&")+"noredirect=1");window.location.href=a};a.ResultChangedState?
c():(("Duplicate"==a.CloseReason||a.CloseAsOffTopicReasonId==B)&&0==b.closest(".mod-post-header").length&&StackExchange.comments.loadAll(b),a.Tooltip&&b.attr("title",a.Tooltip),a.Message?v(a,b):c())}}function v(a,b){b.parent().showInfoMessage(a.Message);if(!a.isRecommendClose){var c=b.find(".existing-flag-count");0==c.length&&(b.text(b.text()+" "),c=$('<span class="existing-flag-count">').appendTo(b));c.text(a.Count)}}function u(a,b){var c=a.Message;if(!c)switch(a.verb){case "flag":c="A problem occurred when trying to flag";
break;case "reopen":c="A problem occurred when trying to reopen";break;case "close":c="A problem occurred when trying to close"}if(!r||!r.closeErrorCallback||!r.closeErrorCallback(c))b.parent().showErrorMessage(c),a.RefreshClient&&setTimeout(function(){location.reload(!0)},2500)}function y(a){!a.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(a.disable().addSpinnerBefore({position:"absolute",margin:"18px 0 0 -25px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/retract".formatUnicorn({questionId:z}),
dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){v(a,s)}).fail(function(){s.parent().showErrorMessage("An error occurred; please try again")}).always(function(){q.find(".popup-close").click()}))}function x(a){t=a;C();t.find(".js-flag-load-close").unbind("click").click(function(){w?w(t,$(this)):E($(this))});t.find("form").submit(function(a){a.preventDefault();F();return!1});A();r&&r.flagShowPopup?r.flagShowPopup(a,s):StackExchange.helpers.bindMovablePopups()}function A(){t.find(".action-list > .disabled-action").each(function(){var a=
$(this);a.find("input[type=radio]").attr("disabled","disabled");a.find(".action-name").addClass("disabled-button")})}var B=3,r,w,z,s,q,t,C=function(){var a=t.find(".popup-submit"),b=t.find('textarea[name="otherText"]'),c=t.find('input[value="PostOther"]');b.focus(function(){b.hideHelpOverlay();c.is(":checked")||c.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(b){c.is(":checked")&&a.enable(b)}});c.click(function(){b.focus()})},D=function(a){if(a.is(".mod-attention-subform")){var b=
a.find('textarea[name="otherText"]').helpOverlay();0<a.find('input[value="PostOther"]:checked').length?b.focus():0==a.find("input:radio:checked").length&&a.closest(".popup").find(".popup-submit").disable()}},E=function(a){var b=t.fadeOut("fast").promise();q||(a.siblings(".action-name").addSpinner({margin:"0 5px"}),b=i(!1));b.done(function(){f();a.is(".js-flag-load-close-duplicate")&&q.find("input[value=Duplicate]").click();q.center().fadeIn("fast")});t.find(".popup-submit").disable();a.removeAttr("checked");
t.find(".action-list li").trigger("hide-action")},F=function(){t.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var a=0<=window.location.href.toLowerCase().indexOf("/tools/flagged"),b=t.find('input[name="top-form"]:checked').val(),c="";"PostOther"==b&&(c=t.find('textarea[name="otherText"]').val());$.ajax({type:"POST",url:"/flags/posts/{postId}/add/{flagType}".formatUnicorn({postId:z,flagType:b}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,otherText:c,fromToolsQueue:a}}).always(function(){StackExchange.helpers.closePopups(".popup")}).done(function(a){if(!r||
!r.flagCallback||!r.flagCallback(s,a))a.ResultChangedState?location.reload(!0):a.Message&&(a.Success?s.parent().showInfoMessage(a.Message):s.parent().showErrorMessage(a.Message))}).fail(function(a){a=a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during flagging";s.parent().showErrorMessage(a)})};return{close_afterLoadListOriginals:m,updateCloseLinkCount:v,init:function(a){r||(r=a);$("body").off("click",".close-question-link, .close-question-button").on("click",".close-question-link, .close-question-button",
function(a,b){a.preventDefault();var c=$(this),d=!!b;z=s=q=t=null;z=c.data("questionid");s=c;c.is(":data(isclosed)")?(d||confirm("Nominate this question for reopening?"))&&n():i(!0)});$("body").off("click",".flag-post-link, .flag-post-button").on("click",".flag-post-link, .flag-post-button",function(a){a.preventDefault();a=$(this);z=s=q=t=null;z=a.data("postid");s=a;var b=a.hasClass("show-invalid")?"?showInvalid=true":"";a.loadPopup({url:"/flags/posts/{postId}/popup".formatUnicorn({postId:z})+b,loaded:x,
hideDescriptions:!1,subformShow:D,dontCenter:r&&r.flagShowPopup})})}}}();
(function(){function i(a,b){this.commentId=a;this.jComment=b;this.postUi=l(b)}function d(a){var a=a.constructor===$?a:$(a),a=a.hasClass("comment")?a:a.closest(".comment"),b=a.attr("id").replace(/^comment-/,"");return new i(b,a)}function h(a,b,c){/Android/.test(navigator.userAgent)&&$(b,a).bind("touchstart",function(a){a=$(a.target);if(!a.is(c))return!0;var b=a.data("events");if(b&&b.click&&b.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function c(a,b,
c){$(".comments",a).delegate(b,"click",function(){d(this)[c]()});h(a,".comments",b)}var k,b=StackExchange.comments,l=b.uiForPost;b.extendPostUi({ensureInput:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),b=this;return a.children().length?(a.add(a.prev()).show(),a.find("textarea")):f(a,"Add Comment",!1,function(){b.submitNewComment()})},saveEditingComments:function(a){var b=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var c=d(this);if(c.commentId!==
a){var e=$(this).find("textarea");b.push([c.commentId,e.val()])}})},restoreEditingComments:function(){this.editingComments&&($.each(this.editingComments,function(a,b){var c=b[1],e=$("#comment-"+b[0]);e.length&&d(e).edit(c,!0)}),delete this.editingComments)},commentsShown:function(){try{var a=this.jDiv.find("form[id^='add-comment-'] textarea:focus");a.length&&StackExchange.comments.tabCompleter.init(a);this.jtBody.data("remaining-comments-count",0)}catch(b){}},submitNewComment:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),
b=a.find("textarea"),c=this,d=a.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:b.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",d).done(function(d){c.showComments(d);b.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(a);a.add(a.prev()).hide();c.jCommentsLink.show();$(document).trigger("comment",c.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},checkDiscussion:function(){var a=
this.jDiv.find("tr.is-comment-discussion"),b=this;if(a.length){a.remove();var c=this.jDiv.find(".comment-form");c.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(a){$(this).unbind("click");a.preventDefault();b.ajax({url:"/posts/"+b.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},
type:"POST"},"when trying to move the discussion to chat",c).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorMessage(c,a.message)})}).end().prependTo(c),a.remove())}}});i.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var a=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),b=this;this.submitVote(0).done(function(c){c.Success?
(a.closest("tr").siblings("tr").show(),b.renderScore(c.NewScore),a[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",b.postUi.postId)):a.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(b){409===b.status&&a.addClass("comment-up-undo");a.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var a=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),b=this;this.submitVote(2).done(function(c){c.Success?
(a.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),a.addClass("comment-up-undo"),b.renderScore(c.NewScore),a[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",b.postUi.postId)):a.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){a.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var a=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(b){var c=a.postUi.jDiv.find("textarea");
b.Success&&(0===a.jComment.siblings(".comment").length&&!c.is(":visible")&&a.jComment.closest(".comments").addClass("dno"),a.jComment.remove())})},flag:function(){var a=this;this.jComment.find(".comment-flag").loadPopup({url:"/flags/comments/{commentId}/popup".formatUnicorn({commentId:this.commentId}),loaded:function(b){var c=b.find('textarea[name="other-text"]').charCounter({min:6,max:200,setIsValid:function(){j()}}),d=b.find('input[name="comment-flag-type"]'),e=d.filter('[value="'+c.data("flag-type")+
'"]'),f=b.find(".text-counter"),j=function(){var a=0<d.filter(":checked").length;if(e.is(":checked")){var j=!c.is(":visible"),a=c.show().val().length;f.show();a=6<=a&&200>=a;j&&c.focus()}else c.hide(),f.hide();b.find(".popup-submit").enable(a)};d.click(j);j();b.find("form").submit(function(){var f=d.filter(":checked").val(),j=e.is(":checked")?c.val():"";b.fadeOutAndRemove();a.submitFlag(f,j).done(function(b){b.Success?b.ResultChangedState?a.jComment.remove():a.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove():
b.Message&&a.jComment.find(".comment-flag").closest("td").showErrorMessage(b.Message)});return!1})}})},submitFlag:function(a,b){var c=this.jComment.find(".comment-actions");return this.postUi.ajax({type:"POST",url:"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({commentId:this.commentId,flagTypeId:a}),data:{fkey:StackExchange.options.user.fkey,otherText:b},dataType:"json"},"during flagging",c,!0)},edit:function(a,b){var c=this.jComment,d=c.find('form[id^="edit-comment-"]'),e=this;d.length&&
(c.find(" > td > *").not(d).hide(),c.find("td:last").addClass("comment-form"),c=f(d,"Save Edits",!0,function(){e.submitEdit()}),c.val(a||d.find("div").text()),d.show(),b||c.focus())},cancelEdit:function(){var a=this.jComment,b=a.find('form[id^="edit-comment-"]');b.children("table").remove();b.hide();b.unbind("submit");a.find("td:last").removeClass("comment-form");a.find(" > td > *").not(b).show()},submitEdit:function(){var a=this.jComment.find('form[id^="edit-comment-"]'),b=this;this.postUi.ajax({type:"POST",
url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:a.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"during comment submission",a).done(function(a){b.postUi.showComments(a,b.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},submitVote:function(a,b){var c=this.jComment.find("td:first"),d={fkey:StackExchange.options.user.fkey};if(b)for(var e in b)d[e]=b[e];return this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/vote/"+
a,dataType:"json",data:d,success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorMessage(c,a.Message)}},"during voting",c,!0)},renderScore:function(a){var b="";a&&0<a&&(b+='<span title="number of \'useful comment\' votes received" class="'+(5>a?"":15>=a?"warm":30>=a?"hot":"supernova")+'">'+a+"</span>");this.jComment.find(".comment-score").html(b)}};var e=function(a){a.find("textarea").keyup(function(b){13==b.which&&!b.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&a.submit()}).keypress(function(a){if(13==
a.which&&!a.shiftKey)return!1})},f=function(a,b,c,f){b=a.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+b+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+b+'"/>'+(c?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';
a.append(b);a.find("textarea").attr("placeholder",a.data("placeholdertext"));c&&a.find(".edit-comment-cancel").click(function(){d(a).cancelEdit()});var j=!1,c=a.find("textarea");c.charCounter({min:15,max:600,setIsValid:function(a){j=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});a.find(".comment-help-link").click(m);if(k)c.one("focus",m);a.submit(function(){j?(StackExchange.helpers.disableSubmitButton(a),f(a)):a.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},
100)});return!1});StackExchange.options.desc||e(a);return c},m=function(a){var b=$(this).closest("tbody"),c=b.find(".comment-help-link"),d=$(".comment-help",b),e;if("click"==a.type)e=0==d.length||!d.is(":visible"),e||(m.manualOnly=!0);else{if(m.manualOnly)return;e=!0}var f=function(){c.text(e?"hide help":"help")};0<d.length?e?d.slideDown(f):d.slideUp(f):e&&(a=$("<tr />").appendTo(b),a=$("<td colspan='2' />").appendTo(a),m.helpText?(a.html(m.helpText),$(".comment-help",a).slideDown(f)):(StackExchange.helpers.addSpinner(c),
a.load("/posts/comment-help",function(a){m.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(f)})))},j=b.init;b.init=function(a){j(a);k=a&&a.autoShowCommentHelp;a=a&&a.post||document;c(a,".comment-up","voteUp");c(a,".comment-delete","delete");c(a,".comment-flag","flag");c(a,".comment-edit","edit");c(a,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",a).each(function(){l(this).addShow(!0)})};b.extendCommentUi=function(a){for(var b in a)a.hasOwnProperty(b)&&
(i.prototype[b]=a[b])}})();
StackExchange.comments.tabCompleter=function(){function i(b){var a=$("#tabcomplete");a.empty();!(5<b.length)&&b.length&&$.each(b,function(b,c){var d=$("<li/>").text(c).appendTo(a);c.toLowerCase()==f.toLowerCase()&&d.addClass("chosen")})}function d(){var b=e.caret().start,a=e.val(),c=!1;if(/@[^\s!?();:+"].*@/.test(a)){if(!/`/.test(a))return null;c=!0}var d=a.substring(b).search(/[\s!?();:+"\[\]\\]/);-1==d&&(d=a.length-b);var f=a.substring(0,b+d).match(/@[^\s!?();:+"\[\]\\]*$/);if(!f)return null;var f=
f[0].substr(1),d=b+d,h=d-f.length;return c&&/@[^\s!?();:+"]/.test(a.substr(0,h-1))?null:{start:h,pos:b,end:d,name:f}}function h(b){var a=d();if(a.name===b)e.is(":focus")||e.focus();else{var c=e.val();e.val(c.substring(0,a.start)+b+c.substring(a.end));b=a.start+b.length;e.caret(b,b)}}function c(b){var a;if(9==b.which){a=$("#tabcomplete li");if(!a.length)return;var c=a.filter(".chosen").removeClass("chosen"),c=b.shiftKey?c.prev():c.next();c.length||(c=b.shiftKey?a.last():a.first());a=c.addClass("chosen").text()}else if(27==
b.which){a=$("#tabcomplete li");if(!a.length)return;a=f;f=null}else return;b.preventDefault();h(a)}function k(b){if(b.which)switch(b.which){case 9:case 16:case 17:case 18:case 220:return}if(b=d()){if(f!=b.name){var a=[];f=b.name;var c;c=b.name?RegExp("^"+StackExchange.helpers.noDiacritics(b.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"):/^\W/;for(var e=l.length,h=0;h<e;h++){var k=l[h].name;(b.name?StackExchange.helpers.noDiacritics(k.replace(/ /g,"").toLowerCase()):k).match(c)&&a.push(k.replace(/ /g,
""))}i(a)}}else f=null,i([])}function b(b){return!b?null:parseInt(b.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var l,e,f=null;$("#tabcomplete > li").live("mousedown",function(){var b=$(this);b.parent().find("li.chosen").removeClass("chosen");h(b.addClass("chosen").text());return!1});var m=b($("#hlinks a.profile-link").attr("href"));return{init:function(d){if(!StackExchange.options.isMobile){var a=d.closest("div.comments"),g=a.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),
g=b(g.attr("href")),h=[];a.find("a.comment-user").each(function(a,c){var d=c.firstChild;if(3!==d.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var d=d.nodeValue,e=b($(c).attr("href"));e!==m&&h.push({id:e,name:d})}});l=[];for(var a={},i=h.length-1;0<=i;i--){var p=h[i];a[p.id]||(l.push(p),a[p.id]=!0)}$("#tabcomplete").remove();e&&e.unbind($.browser.opera?"keypress":"keydown",c).unbind("keyup click",k);0===l.length||1===l.length&&l[0].id===g?e=null:(e=d,f=null,$("<ul id='tabcomplete' />").insertBefore(d),
d.bind("keydown",c).bind("keyup click",k))}}}}();
StackExchange.inlineEditing={init:function(){function i(d,h,c,i){h.fadeIn(c,i);d.hide()}$(".post-menu .edit-post").live("click",function(d){if(!d.ctrlKey&&!d.altKey&&!d.metaKey&&!d.shiftKey){var h=$(this),c=h.closest(".question, .answer");if(1==h.data("handling-event"))return!1;h.data("handling-event",1);c.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();h.addSpinner();var k=c.hasClass("answer"),b=c.find(".postcell,.answercell"),
l=b.find("> *"),e=$('<div class="inline-editor"/>').hide().appendTo(b);e.load(h.attr("href")+"-inline",function(d,m){var j;e.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();c.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);if("error"==m)StackExchange.helpers.showErrorMessage(b,"The post could not be loaded"),e.remove(),h.data("handling-event",0);else{i(l,e,300);
var a=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}$("#show-editor-button").show();h.data("handling-event",0);i(e,a,300,function(){e.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);return!1},g=function(){u.unbind("keyup",n);A.trigger(j)},n=function(){A.trigger(u[0].value);return!0};e.find(".cancel-edit").click(function(){g();
a(l)});var o=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},1E3,{sliding:!0}),p=e.find(".hide-preview");p.click(function(){var a=e.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),p.text("show preview")):(a.slideDown(),p.text("hide preview"));o.trigger(b);return!1});e.find('input[type="submit"]').attr("id").replace("submit-button","");var v=e.find("form"),u=e.find("#title"),y=$("#question-header a"),
x=u.data("question-state-suffix"),x=x?" "+x:"";j=u.val();var A=StackExchange.helpers.DelayedReaction(function(a){"undefined"!=typeof a&&(y.text(a+x),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,y[0]]))},{sliding:!0});u.keyup(n);e.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(b){if(!0===b.ctrlKey&&13==b.keyCode)return v.submit(),!1;if(27==b.keyCode)return g(),a(l),!1});StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(v,
k?2:1,k?"answer":"question",!1,function(c){var d=$(c.html).hide();b.replaceWith(d);k||$("#question-header a").text(c.title);$("html").trigger("inline-edit-complete",[d,c.title]);styleCode();a(d)})})}});return!1}})}};
StackExchange.vote_bounty=function(){var i,d=function(b,c,d){c=$(".bounty-vote");if(d.Success){$(".bounty-notification").remove();i=!1;var f=b.closest("td.votecell").parent().find("span.reputation-score:last");d.Message&&(d=$(d.Message),f.text(d.text()).attr("title",d.attr("title")));d=b.closest("div.vote").find(".bounty-award-container");1<d.length?(d=d.filter(":first").find(".bounty-award"),f=parseInt(d.text(),10),b=parseInt(b.text(),10),d.text("+"+(f+b)),c.remove()):(b.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
c.not(b).remove())}else StackExchange.helpers.showErrorMessage(b.parent(),d.Message),c.removeClass("disabled")},h=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var b=$(this),c=StackExchange.vote.getPostId(b);if(i?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(b,
c,StackExchange.vote.voteTypeIds.bountyClose,d)})},c=function(b,c){c=$(c||$(".bounty-link"));c=c.off("click",k);if(b)c.on("click",k);return c},k=function(){var b=c(!1,this);b.addSpinnerAfter({padding:"0 3px"});var d=$(b).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+d,dataType:"html",success:function(c){var d=$(c);d.appendTo(b.parent());d.find(".popup-close").click(function(){d.fadeOutAndRemove()});d.center().fadeIn("fast")},error:function(){b.parent().showErrorMessage("Unable to load popup - please try again")},
complete:function(){StackExchange.helpers.removeSpinner();c(!0,b)}})};return{init:function(b){i=!!b.hasOpenBounty;b.canOpenBounty&&c(!0);b.hasOpenBounty&&h()}}}();